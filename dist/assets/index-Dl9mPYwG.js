(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const f of s)if(f.type==="childList")for(const u of f.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function c(s){const f={};return s.integrity&&(f.integrity=s.integrity),s.referrerPolicy&&(f.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?f.credentials="include":s.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(s){if(s.ep)return;s.ep=!0;const f=c(s);fetch(s.href,f)}})();var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},ve={exports:{}},Ct=ve.exports,Qe;function Dt(){return Qe||(Qe=1,(function(p,d){(function(c,a,s){var f=d&&!d.nodeType&&d,u=p&&!p.nodeType&&p,m=f&&u&&typeof Xe=="object"&&Xe,K=u&&u.exports===f&&f;m&&(m.global===m||m.window===m||m.self===m)&&(c=m),s(f&&u?K?u.exports:f:c[a]={})})(Ct,"luaparse",function(c){c.version="0.3.1";var a,s,f,u,m,K=c.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function N(e,t){return t=t||0,e<128?String.fromCharCode(e):e<2048?String.fromCharCode(t|192|e>>6,t|128|e&63):e<65536?String.fromCharCode(t|224|e>>12,t|128|e>>6&63,t|128|e&63):e<1114112?String.fromCharCode(t|240|e>>18,t|128|e>>12&63,t|128|e>>6&63,t|128|e&63):null}function te(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n}function be(e){return function(t){var n=e.exec(t);if(!n)return t;y(null,b.invalidCodeUnit,te(n[0].charCodeAt(0),4).toUpperCase())}}var ye={"pseudo-latin1":{fixup:be(/[^\x00-\xff]/),encodeByte:function(e){return e===null?"":String.fromCharCode(e)},encodeUTF8:function(e){return N(e)}},"x-user-defined":{fixup:be(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return e===null?"":e>=128?String.fromCharCode(e|63232):String.fromCharCode(e)},encodeUTF8:function(e){return N(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},se=1,R=2,J=4,P=8,le=16,M=32,oe=64,ce=128,ue=256;c.tokenTypes={EOF:se,StringLiteral:R,Keyword:J,Identifier:P,NumericLiteral:le,Punctuator:M,BooleanLiteral:oe,NilLiteral:ce,VarargLiteral:ue};var b=c.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},g=c.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,n,i){return{type:"FunctionDeclaration",identifier:e,isLocal:n,parameters:t,body:i}},forNumericStatement:function(e,t,n,i,l){return{type:"ForNumericStatement",variable:e,start:t,end:n,step:i,body:l}},forGenericStatement:function(e,t,n){return{type:"ForGenericStatement",variables:e,iterators:t,body:n}},chunk:function(e){return{type:"Chunk",body:e}},identifier:function(e){return{type:"Identifier",name:e}},literal:function(e,t,n){return e=e===R?"StringLiteral":e===le?"NumericLiteral":e===oe?"BooleanLiteral":e===ce?"NilLiteral":"VarargLiteral",{type:e,value:t,raw:n}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,n){var i=e==="and"||e==="or"?"LogicalExpression":"BinaryExpression";return{type:i,operator:e,left:t,right:n}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,n){return{type:"MemberExpression",indexer:t,identifier:n,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}}};function h(e){if(O){var t=D.pop();t.complete(),t.bless(e)}return s.onCreateNode&&s.onCreateNode(e),e}var Ne=Array.prototype.slice,Fe=function(e,t){for(var n=0,i=e.length;n<i;++n)if(e[n]===t)return n;return-1};Array.prototype.indexOf&&(Fe=function(e,t){return e.indexOf(t)});function et(e,t,n){for(var i=0,l=e.length;i<l;++i)if(e[i][t]===n)return i;return-1}function fe(e){var t=Ne.call(arguments,1);return e=e.replace(/%(\d)/g,function(n,i){return""+t[i-1]||""}),e}var Ae=function(e){for(var t=Ne.call(arguments,1),n,i,l=0,v=t.length;l<v;++l){n=t[l];for(i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};Object.assign&&(Ae=Object.assign),c.SyntaxError=SyntaxError;function Ve(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function y(e){var t=fe.apply(null,Ne.call(arguments,1)),n,i;throw e===null||typeof e.line>"u"?(i=r-B+1,n=Ve(new SyntaxError(fe("[%1:%2] %3",k,i,t))),n.index=r,n.line=k,n.column=i):(i=e.range[0]-e.lineStart,n=Ve(new SyntaxError(fe("[%1:%2] %3",e.line,i,t))),n.line=e.line,n.index=e.range[0],n.column=i),n}function pe(e){var t=a.slice(e.range[0],e.range[1]);return t||e.value}function Q(e,t){y(t,b.expectedToken,e,pe(t))}function de(e){var t=pe(Y);if(typeof e.type<"u"){var n;switch(e.type){case R:n="string";break;case J:n="keyword";break;case P:n="identifier";break;case le:n="number";break;case M:n="symbol";break;case oe:n="boolean";break;case ce:return y(e,b.unexpected,"symbol","nil",t);case se:return y(e,b.unexpectedEOF)}return y(e,b.unexpected,n,pe(e),t)}return y(e,b.unexpected,"symbol",e,t)}var r,o,U,Y,Ie,w,k,B;c.lex=Oe;function Oe(){for(ke();a.charCodeAt(r)===45&&a.charCodeAt(r+1)===45;)ft(),ke();if(r>=f)return{type:se,value:"<eof>",line:k,lineStart:B,range:[r,r]};var e=a.charCodeAt(r),t=a.charCodeAt(r+1);if(w=r,dt(e))return tt();switch(e){case 39:case 34:return rt();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return qe();case 46:return $(t)?qe():t===46?a.charCodeAt(r+2)===46?nt():I(".."):I(".");case 61:return I(t===61?"==":"=");case 62:return u.bitwiseOperators&&t===62?I(">>"):I(t===61?">=":">");case 60:return u.bitwiseOperators&&t===60?I("<<"):I(t===61?"<=":"<");case 126:if(t===61)return I("~=");if(!u.bitwiseOperators)break;return I("~");case 58:return u.labels&&t===58?I("::"):I(":");case 91:return t===91||t===61?at():I("[");case 47:return u.integerDivision&&t===47?I("//"):I("/");case 38:case 124:if(!u.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return I(a.charAt(r))}return de(a.charAt(r))}function Se(){var e=a.charCodeAt(r),t=a.charCodeAt(r+1);return me(e)?(e===10&&t===13&&++r,e===13&&t===10&&++r,++k,B=++r,!0):!1}function ke(){for(;r<f;){var e=a.charCodeAt(r);if(pt(e))++r;else if(!Se())break}}function tt(){for(var e,t;mt(a.charCodeAt(++r)););return e=m.fixup(a.slice(w,r)),gt(e)?t=J:e==="true"||e==="false"?(t=oe,e=e==="true"):e==="nil"?(t=ce,e=null):t=P,{type:t,value:e,line:k,lineStart:B,range:[w,r]}}function I(e){return r+=e.length,{type:M,value:e,line:k,lineStart:B,range:[w,r]}}function nt(){return r+=3,{type:ue,value:"...",line:k,lineStart:B,range:[w,r]}}function rt(){for(var e=a.charCodeAt(r++),t=k,n=B,i=r,l=m.discardStrings?null:"",v;v=a.charCodeAt(r++),e!==v;)if((r>f||me(v))&&(l+=a.slice(i,r-1),y(null,b.unfinishedString,a.slice(w,r-1))),v===92){if(!m.discardStrings){var S=a.slice(i,r-1);l+=m.fixup(S)}var A=ut();m.discardStrings||(l+=A),i=r}return m.discardStrings||(l+=m.encodeByte(null),l+=m.fixup(a.slice(i,r-1))),{type:R,value:l,line:t,lineStart:n,lastLine:k,lastLineStart:B,range:[w,r]}}function at(){var e=k,t=B,n=Ge(!1);return n===!1&&y(o,b.expected,"[",pe(o)),{type:R,value:m.discardStrings?null:m.fixup(n),line:e,lineStart:t,lastLine:k,lastLineStart:B,range:[w,r]}}function qe(){var e=a.charAt(r),t=a.charAt(r+1),n=e==="0"&&"xX".indexOf(t||null)>=0?lt():ot(),i=it(),l=st();return l&&(i||n.hasFractionPart)&&y(null,b.malformedNumber,a.slice(w,r)),{type:le,value:n.value,line:k,lineStart:B,range:[w,r]}}function it(){if(u.imaginaryNumbers)return"iI".indexOf(a.charAt(r)||null)>=0?(++r,!0):!1}function st(){if(u.integerSuffixes){if("uU".indexOf(a.charAt(r)||null)>=0)if(++r,"lL".indexOf(a.charAt(r)||null)>=0){if(++r,"lL".indexOf(a.charAt(r)||null)>=0)return++r,"ULL";y(null,b.malformedNumber,a.slice(w,r))}else y(null,b.malformedNumber,a.slice(w,r));else if("lL".indexOf(a.charAt(r)||null)>=0){if(++r,"lL".indexOf(a.charAt(r)||null)>=0)return++r,"LL";y(null,b.malformedNumber,a.slice(w,r))}}}function lt(){var e=0,t=1,n=1,i,l,v,S;for(S=r+=2,Z(a.charCodeAt(r))||y(null,b.malformedNumber,a.slice(w,r));Z(a.charCodeAt(r));)++r;i=parseInt(a.slice(S,r),16);var A=!1;if(a.charAt(r)==="."){for(A=!0,l=++r;Z(a.charCodeAt(r));)++r;e=a.slice(l,r),e=l===r?0:parseInt(e,16)/Math.pow(16,r-l)}var we=!1;if("pP".indexOf(a.charAt(r)||null)>=0){for(we=!0,++r,"+-".indexOf(a.charAt(r)||null)>=0&&(n=a.charAt(r++)==="+"?1:-1),v=r,$(a.charCodeAt(r))||y(null,b.malformedNumber,a.slice(w,r));$(a.charCodeAt(r));)++r;t=a.slice(v,r),t=Math.pow(2,t*n)}return{value:(i+e)*t,hasFractionPart:A||we}}function ot(){for(;$(a.charCodeAt(r));)++r;var e=!1;if(a.charAt(r)===".")for(e=!0,++r;$(a.charCodeAt(r));)++r;var t=!1;if("eE".indexOf(a.charAt(r)||null)>=0)for(t=!0,++r,"+-".indexOf(a.charAt(r)||null)>=0&&++r,$(a.charCodeAt(r))||y(null,b.malformedNumber,a.slice(w,r));$(a.charCodeAt(r));)++r;return{value:parseFloat(a.slice(w,r)),hasFractionPart:e||t}}function ct(){var e=r++;for(a.charAt(r++)!=="{"&&y(null,b.braceExpected,"{","\\"+a.slice(e,r)),Z(a.charCodeAt(r))||y(null,b.hexadecimalDigitExpected,"\\"+a.slice(e,r));a.charCodeAt(r)===48;)++r;for(var t=r;Z(a.charCodeAt(r));)++r,r-t>6&&y(null,b.tooLargeCodepoint,"\\"+a.slice(e,r));var n=a.charAt(r++);n!=="}"&&(n==='"'||n==="'"?y(null,b.braceExpected,"}","\\"+a.slice(e,r--)):y(null,b.hexadecimalDigitExpected,"\\"+a.slice(e,r)));var i=parseInt(a.slice(t,r-1)||"0",16),l="\\"+a.slice(e,r);return i>1114111&&y(null,b.tooLargeCodepoint,l),m.encodeUTF8(i,l)}function ut(){var e=r;switch(a.charAt(r)){case"a":return++r,"\x07";case"n":return++r,`
`;case"r":return++r,"\r";case"t":return++r,"	";case"v":return++r,"\v";case"b":return++r,"\b";case"f":return++r,"\f";case"\r":case`
`:return Se(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;$(a.charCodeAt(r))&&r-e<3;)++r;var t=a.slice(e,r),n=parseInt(t,10);return n>255&&y(null,b.decimalEscapeTooLarge,"\\"+n),m.encodeByte(n,"\\"+t);case"z":if(u.skipWhitespaceEscape)return++r,ke(),"";break;case"x":if(u.hexEscapes){if(Z(a.charCodeAt(r+1))&&Z(a.charCodeAt(r+2)))return r+=3,m.encodeByte(parseInt(a.slice(e+1,r),16),"\\"+a.slice(e,r));y(null,b.hexadecimalDigitExpected,"\\"+a.slice(e,r+2))}break;case"u":if(u.unicodeEscapes)return ct();break;case"\\":case'"':case"'":return a.charAt(r++)}return u.strictEscapes&&y(null,b.invalidEscape,"\\"+a.slice(e,r+1)),a.charAt(r++)}function ft(){w=r,r+=2;var e=a.charAt(r),t="",n=!1,i=r,l=B,v=k;if(e==="["&&(t=Ge(!0),t===!1?t=e:n=!0),!n){for(;r<f&&!me(a.charCodeAt(r));)++r;s.comments&&(t=a.slice(i,r))}if(s.comments){var S=g.comment(t,a.slice(w,r));s.locations&&(S.loc={start:{line:v,column:w-l},end:{line:k,column:r-B}}),s.ranges&&(S.range=[w,r]),s.onCreateNode&&s.onCreateNode(S),Ie.push(S)}}function Ge(e){var t=0,n="",i=!1,l,v,S=k;for(++r;a.charAt(r+t)==="=";)++t;if(a.charAt(r+t)!=="[")return!1;for(r+=t+1,me(a.charCodeAt(r))&&Se(),v=r;r<f;){for(;me(a.charCodeAt(r));)Se();if(l=a.charAt(r++),l==="]"){i=!0;for(var A=0;A<t;++A)a.charAt(r+A)!=="="&&(i=!1);a.charAt(r+t)!=="]"&&(i=!1)}if(i)return n+=a.slice(v,r-1),r+=t+1,n}y(null,e?b.unfinishedLongComment:b.unfinishedLongString,S,"<eof>")}function L(){U=o,o=Y,Y=Oe()}function E(e){return e===o.value?(L(),!0):!1}function x(e){e===o.value?L():y(o,b.expected,e,pe(o))}function pt(e){return e===9||e===32||e===11||e===12}function me(e){return e===10||e===13}function $(e){return e>=48&&e<=57}function Z(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function dt(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||u.extendedIdentifiers&&e>=128)}function mt(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||e>=48&&e<=57||u.extendedIdentifiers&&e>=128)}function gt(e){switch(e.length){case 2:return e==="do"||e==="if"||e==="in"||e==="or";case 3:return e==="and"||e==="end"||e==="for"||e==="not";case 4:return e==="else"||e==="then"?!0:u.labels&&!u.contextualGoto?e==="goto":!1;case 5:return e==="break"||e==="local"||e==="until"||e==="while";case 6:return e==="elseif"||e==="repeat"||e==="return";case 8:return e==="function"}return!1}function ht(e){return M===e.type?"#-~".indexOf(e.value)>=0:J===e.type?e.value==="not":!1}function vt(e){if(se===e.type)return!0;if(J!==e.type)return!1;switch(e.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var _,ne,Le;function j(){var e=_[ne++].slice();_.push(e),s.onCreateScope&&s.onCreateScope()}function V(){_.pop(),--ne,s.onDestroyScope&&s.onDestroyScope()}function Te(e){s.onLocalDeclaration&&s.onLocalDeclaration(e),Fe(_[ne],e)===-1&&_[ne].push(e)}function ge(e){Te(e.name),he(e,!0)}function he(e,t){!t&&et(Le,"name",e.name)===-1&&Le.push(e),e.isLocal=t}function Be(e){return Fe(_[ne],e)!==-1}var D=[],O;function W(){return new xe(o)}function xe(e){s.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),s.ranges&&(this.range=[e.range[0],0])}xe.prototype.complete=function(){s.locations&&(this.loc.end.line=U.lastLine||U.line,this.loc.end.column=U.range[1]-(U.lastLineStart||U.lineStart)),s.ranges&&(this.range[1]=U.range[1])},xe.prototype.bless=function(e){if(this.loc){var t=this.loc;e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}}this.range&&(e.range=[this.range[0],this.range[1]])};function re(){O&&D.push(W())}function C(e){O&&D.push(e)}function H(){this.scopes=[],this.pendingGotos=[]}H.prototype.isInLoop=function(){for(var e=this.scopes.length;e-- >0;)if(this.scopes[e].isLoop)return!0;return!1},H.prototype.pushScope=function(e){var t={labels:{},locals:[],deferredGotos:[],isLoop:!!e};this.scopes.push(t)},H.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&y(t.token,b.labelNotVisible,t.target)}this.scopes.pop()},H.prototype.addGoto=function(e,t){for(var n=[],i=0;i<this.scopes.length;++i){var l=this.scopes[i];if(n.push(l.locals.length),Object.prototype.hasOwnProperty.call(l.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:n})},H.prototype.addLabel=function(e,t){var n=this.currentScope();if(Object.prototype.hasOwnProperty.call(n.labels,e))y(t,b.labelAlreadyDefined,e,n.labels[e].line);else{for(var i=[],l=0;l<this.pendingGotos.length;++l){var v=this.pendingGotos[l];if(v.maxDepth>=this.scopes.length&&v.target===e){v.localCounts[this.scopes.length-1]<n.locals.length&&n.deferredGotos.push(v);continue}i.push(v)}this.pendingGotos=i}n.labels[e]={localCount:n.locals.length,line:t.line}},H.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},H.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},H.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,n=0;n<t.length;++n){var i=t[n];y(i.token,b.gotoJumpInLocalScope,i.target,e.locals[i.localCounts[this.scopes.length-1]].name)}};function z(){this.level=0,this.loopLevels=[]}z.prototype.isInLoop=function(){return!!this.loopLevels.length},z.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},z.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},z.prototype.addGoto=z.prototype.addLabel=function(){throw new Error("This should never happen")},z.prototype.addLocal=z.prototype.raiseDeferredErrors=function(){};function Ke(){return u.labels?new H:new z}function bt(){L(),re(),s.scope&&j();var e=Ke();e.allowVararg=!0,e.pushScope();var t=q(e);return e.popScope(),s.scope&&V(),se!==o.type&&de(o),O&&!t.length&&(U=o),h(g.chunk(t))}function q(e){for(var t=[],n;!vt(o);){if(o.value==="return"||!u.relaxedBreak&&o.value==="break"){t.push(Re(e));break}n=Re(e),E(";"),n&&t.push(n)}return t}function Re(e){if(re(),M===o.type&&E("::"))return yt(e);if(u.emptyStatement&&E(";")){O&&D.pop();return}if(e.raiseDeferredErrors(),J===o.type)switch(o.value){case"local":return L(),At(e);case"if":return L(),Nt(e);case"return":return L(),wt(e);case"function":L();var t=Ot();return Ce(t);case"while":return L(),xt(e);case"for":return L(),Ft(e);case"repeat":return L(),Et(e);case"break":return L(),e.isInLoop()||y(o,b.noLoopToBreak,o.value),St();case"do":return L(),Lt(e);case"goto":return L(),Me(e)}return u.contextualGoto&&o.type===P&&o.value==="goto"&&Y.type===P&&Y.value!=="goto"?(L(),Me(e)):(O&&D.pop(),It(e))}function yt(e){var t=o,n=T();return s.scope&&(Te("::"+t.value+"::"),he(n,!0)),x("::"),e.addLabel(t.value,t),h(g.labelStatement(n))}function St(){return h(g.breakStatement())}function Me(e){var t=o.value,n=U,i=T();return e.addGoto(t,n),h(g.gotoStatement(i))}function Lt(e){s.scope&&j(),e.pushScope();var t=q(e);return e.popScope(),s.scope&&V(),x("end"),h(g.doStatement(t))}function xt(e){var t=F(e);x("do"),s.scope&&j(),e.pushScope(!0);var n=q(e);return e.popScope(),s.scope&&V(),x("end"),h(g.whileStatement(t,n))}function Et(e){s.scope&&j(),e.pushScope(!0);var t=q(e);x("until"),e.raiseDeferredErrors();var n=F(e);return e.popScope(),s.scope&&V(),h(g.repeatStatement(n,t))}function wt(e){var t=[];if(o.value!=="end"){var n=Ee(e);for(n!=null&&t.push(n);E(",");)n=F(e),t.push(n);E(";")}return h(g.returnStatement(t))}function Nt(e){var t=[],n,i,l;for(O&&(l=D[D.length-1],D.push(l)),n=F(e),x("then"),s.scope&&j(),e.pushScope(),i=q(e),e.popScope(),s.scope&&V(),t.push(h(g.ifClause(n,i))),O&&(l=W());E("elseif");)C(l),n=F(e),x("then"),s.scope&&j(),e.pushScope(),i=q(e),e.popScope(),s.scope&&V(),t.push(h(g.elseifClause(n,i))),O&&(l=W());return E("else")&&(O&&(l=new xe(U),D.push(l)),s.scope&&j(),e.pushScope(),i=q(e),e.popScope(),s.scope&&V(),t.push(h(g.elseClause(i)))),x("end"),h(g.ifStatement(t))}function Ft(e){var t=T(),n;if(s.scope&&(j(),ge(t)),E("=")){var i=F(e);x(",");var l=F(e),v=E(",")?F(e):null;return x("do"),e.pushScope(!0),n=q(e),e.popScope(),x("end"),s.scope&&V(),h(g.forNumericStatement(t,i,l,v,n))}else{for(var S=[t];E(",");)t=T(),s.scope&&ge(t),S.push(t);x("in");var A=[];do{var we=F(e);A.push(we)}while(E(","));return x("do"),e.pushScope(!0),n=q(e),e.popScope(),x("end"),s.scope&&V(),h(g.forGenericStatement(S,A,n))}}function At(e){var t,n=U;if(P===o.type){var i=[],l=[];do t=T(),i.push(t),e.addLocal(t.name,n);while(E(","));if(E("="))do{var v=F(e);l.push(v)}while(E(","));if(s.scope)for(var S=0,A=i.length;S<A;++S)ge(i[S]);return h(g.localStatement(i,l))}if(E("function"))return t=T(),e.addLocal(t.name,n),s.scope&&(ge(t),j()),Ce(t,!0);Q("<name>",o)}function It(e){var t,n,i,l,v,S=[];O&&(n=W());do{if(O&&(t=W()),P===o.type)v=o.value,l=T(),s.scope&&he(l,Be(v)),i=!0;else if(o.value==="(")L(),l=F(e),x(")"),i=!1;else return de(o);e:for(;;){switch(R===o.type?'"':o.value){case".":case"[":i=!0;break;case":":case"(":case"{":case'"':i=null;break;default:break e}l=He(l,t,e)}if(S.push(l),o.value!==",")break;if(!i)return de(o);L()}while(!0);if(S.length===1&&i===null)return C(t),h(g.callStatement(S[0]));if(!i)return de(o);x("=");var A=[];do A.push(F(e));while(E(","));return C(n),h(g.assignmentStatement(S,A))}function T(){re();var e=o.value;return P!==o.type&&Q("<name>",o),L(),h(g.identifier(e))}function Ce(e,t){var n=Ke();n.pushScope();var i=[];if(x("("),!E(")"))for(;;){if(P===o.type){var l=T();if(s.scope&&ge(l),i.push(l),E(","))continue}else ue===o.type?(n.allowVararg=!0,i.push(Pe(n))):Q("<name> or '...'",o);x(")");break}var v=q(n);return n.popScope(),x("end"),s.scope&&V(),t=t||!1,h(g.functionStatement(e,i,t,v))}function Ot(){var e,t,n;for(O&&(n=W()),e=T(),s.scope&&(he(e,Be(e.name)),j());E(".");)C(n),t=T(),e=h(g.memberExpression(e,".",t));return E(":")&&(C(n),t=T(),e=h(g.memberExpression(e,":",t)),s.scope&&Te("self")),e}function We(e){for(var t=[],n,i;;){if(re(),M===o.type&&E("["))n=F(e),x("]"),x("="),i=F(e),t.push(h(g.tableKey(n,i)));else if(P===o.type)Y.value==="="?(n=T(),L(),i=F(e),t.push(h(g.tableKeyString(n,i)))):(i=F(e),t.push(h(g.tableValue(i))));else{if((i=Ee(e))==null){D.pop();break}t.push(h(g.tableValue(i)))}if(",;".indexOf(o.value)>=0){L();continue}break}return x("}"),h(g.tableConstructorExpression(t))}function Ee(e){var t=De(0,e);return t}function F(e){var t=Ee(e);if(t==null)Q("<expression>",o);else return t}function kt(e){var t=e.charCodeAt(0),n=e.length;if(n===1)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(n===2)switch(t){case 47:return 10;case 46:return 8;case 60:case 62:return e==="<<"||e===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(t===97&&e==="and")return 2;return 0}function De(e,t){var n=o.value,i,l;if(O&&(l=W()),ht(o)){re(),L();var v=De(10,t);v==null&&Q("<expression>",o),i=h(g.unaryExpression(n,v))}if(i==null&&(i=Pe(t),i==null&&(i=Tt(t))),i==null)return null;for(var S;n=o.value,S=M===o.type||J===o.type?kt(n):0,!(S===0||S<=e);){(n==="^"||n==="..")&&--S,L();var A=De(S,t);A==null&&Q("<expression>",o),O&&D.push(l),i=h(g.binaryExpression(n,i,A))}return i}function He(e,t,n){var i,l;if(M===o.type)switch(o.value){case"[":return C(t),L(),i=F(n),x("]"),h(g.indexExpression(e,i));case".":return C(t),L(),l=T(),h(g.memberExpression(e,".",l));case":":return C(t),L(),l=T(),e=h(g.memberExpression(e,":",l)),C(t),Ue(e,n);case"(":case"{":return C(t),Ue(e,n)}else if(R===o.type)return C(t),Ue(e,n);return null}function Tt(e){var t,n,i;if(O&&(i=W()),P===o.type)n=o.value,t=T(),s.scope&&he(t,Be(n));else if(E("("))t=F(e),x(")");else return null;for(;;){var l=He(t,i,e);if(l===null)break;t=l}return t}function Ue(e,t){if(M===o.type)switch(o.value){case"(":u.emptyStatement||o.line!==U.line&&y(null,b.ambiguousSyntax,o.value),L();var n=[],i=Ee(t);for(i!=null&&n.push(i);E(",");)i=F(t),n.push(i);return x(")"),h(g.callExpression(e,n));case"{":re(),L();var l=We(t);return h(g.tableCallExpression(e,l))}else if(R===o.type)return h(g.stringCallExpression(e,Pe(t)));Q("function arguments",o)}function Pe(e){var t=R|le|oe|ce|ue,n=o.value,i=o.type,l;if(O&&(l=W()),i===ue&&!e.allowVararg&&y(o,b.cannotUseVararg,o.value),i&t){C(l);var v=a.slice(o.range[0],o.range[1]);return L(),h(g.literal(i,n,v))}else{if(J===i&&n==="function")return C(l),L(),s.scope&&j(),Ce(null);if(E("{"))return C(l),We(e)}}c.parse=Bt;var Je={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Bt(e,t){if(typeof t>"u"&&typeof e=="object"&&(t=e,e=void 0),t||(t={}),a=e||"",s=Ae({},K,t),r=0,k=1,B=0,f=a.length,_=[[]],ne=0,Le=[],D=[],!Object.prototype.hasOwnProperty.call(Je,s.luaVersion))throw new Error(fe("Lua version '%1' not supported",s.luaVersion));if(u=Ae({},Je[s.luaVersion]),s.extendedIdentifiers!==void 0&&(u.extendedIdentifiers=!!s.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ye,s.encodingMode))throw new Error(fe("Encoding mode '%1' not supported",s.encodingMode));return m=ye[s.encodingMode],s.comments&&(Ie=[]),s.wait?c:ze()}c.write=$e;function $e(e){return a+=String(e),f=a.length,c}c.end=ze;function ze(e){typeof e<"u"&&$e(e),a&&a.substr(0,2)==="#!"&&(a=a.replace(/^.*/,function(n){return n.replace(/./g," ")})),f=a.length,O=s.locations||s.ranges,Y=Oe();var t=bt();if(s.comments&&(t.comments=Ie),s.scope&&(t.globals=Le),D.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return t}})})(ve,ve.exports)),ve.exports}Dt();async function Ut(p,d="ronroblox"){try{const c=await fetch(`/api/fandom-image?filename=${encodeURIComponent(p)}&wiki=${encodeURIComponent(d)}`);if(!c.ok)throw new Error(`Failed to fetch image data: ${c.status}`);const a=await c.json();if(a.error)throw new Error(a.error);return a.url}catch(c){throw console.error(`Error fetching Fandom image URL for ${p}:`,c),c}}let X,Ye,ee,je,ie=null;async function Pt(){return ie=(async()=>{try{const p=await fetch("/api/fandom-data");if(!p.ok)throw new Error(`HTTP ${p.status}`);const d=await p.json();if(X=d.Lawnames,Ye=d.Flagdata,ee=d.Nationdata,je=d.Tagdata,console.log("✅ Data loaded successfully!"),console.log(X),console.log(Ye),console.log(ee),console.log(je),X?.lawNames?.Elective_Assembly?.Name){const c=X.lawNames.Elective_Assembly.Name;console.log(c)}await _e(),await Ze()}catch(p){throw console.error("Error loading fandom data:",p),p}})(),ie}function jt(p,d){let c,a,s;for(a=document.getElementsByClassName("tabcontent"),c=0;c<a.length;c++)a[c].classList.remove("tabcontent-visible"),a[c].classList.add("tabcontent-hidden");for(s=document.getElementsByClassName("tablinks"),c=0;c<s.length;c++)s[c].className=s[c].className.replace(" active","");document.getElementById(d).classList.remove("tabcontent-hidden"),document.getElementById(d).classList.add("tabcontent-visible"),p.currentTarget.className+=" active"}async function Ze(){!ee?.nationdata&&ie&&(console.log("⏳ Waiting for data to load..."),await ie);const p=document.getElementsByClassName("nations-list"),d=36;function c(s,f){const u=document.createElement("li"),m=document.createElement("button"),K=document.createElement("span");K.classList.add("flag-image");const N=document.createElement("img");N.src=f,K.appendChild(N);const te=document.createElement("span");return te.textContent=s,m.appendChild(K),m.appendChild(te),m.addEventListener("click",()=>Rt(s)),u.appendChild(m),u}function a(s){return s.includes("scale-to-width-down")?s.replace(/scale-to-width-down\/\d+/,`scale-to-width-down/${d}`):s.replace(/\/revision\/latest/,`/revision/latest/scale-to-width-down/${d}`)}for(let s of p){const f=s.parentElement.id;let u=[];f==="Nations"?u=Object.keys(ee.nationdata).filter(N=>ee.nationdata[N].nation===!0).sort():f==="Releasables"?u=Object.keys(ee.nationdata).filter(N=>ee.nationdata[N].nation===!1).sort():f==="Formables"&&(u=Object.values(je.Tags).filter(N=>N.FormableName).filter(N=>!N.Removed).map(N=>N.FormableName).sort());const m=u.map(N=>Ut(N+"_Flag.png")),K=await Promise.all(m);s.innerHTML="",u.forEach((N,te)=>{const be=a(K[te]),ye=c(N,be);s.appendChild(ye)})}}function Vt(){var p,d,c,a,s,f,u,m;for(p=document.getElementById("nations-search-filter"),d=p.value.toUpperCase(),c=document.getElementsByClassName("nations-list"),s=0;s<c.length;s++)for(f=c[s].getElementsByTagName("li"),a=0;a<f.length;a++)u=f[a].getElementsByTagName("span")[1],m=u.textContent||u.innerText,m.toUpperCase().indexOf(d)>-1?f[a].style.display="":f[a].style.display="none"}async function _e(p){!X?.lawNames&&ie&&await ie;const d=document.querySelector(".laws-selection");if(console.log(d),!d){console.error("Element with class 'laws-selection' not found");return}if(!X||!X.lawNames){console.error("Lawnames data not loaded yet");return}d.innerHTML="";function c(s){const f=document.createElement("button");return f.classList.add("btn"),f.textContent=s,f}const a=Object.entries(X.lawNames).sort((s,f)=>s[1].Name.localeCompare(f[1].Name));for(let[s,f]of a){const u=c(f.Name);d.appendChild(u)}}let G={NationName:"",Flags:[]};function qt(p={}){const d={FlagName:p.FlagName||"",FlagID:p.FlagID||G.Flags.length,Description:p.Description||"",Ideologies:p.Ideologies||[],Laws:p.Laws||{},NOTIdeologies:p.NOTIdeologies||[],NOTLaws:p.NOTLaws||{}};return G.Flags.push(d),d}function Gt(p){G.Flags.splice(p,1)}function ae(){console.log("Current Flag Specifications:",G);const p=document.querySelector("#nation-name");p&&(p.value=G.NationName);const d=document.querySelector(".main-content"),c=document.querySelector(".new-flag-button");document.querySelectorAll(".flag").forEach(s=>s.remove()),G.Flags.forEach((s,f)=>{const u=Kt(s,f);d.insertBefore(u,c)})}function Kt(p,d){const c=document.createElement("div");return c.classList.add("flag"),c.dataset.flagIndex=d,c.innerHTML=`
        <button class="collapse-flag-overview-button">
            <div class="flag-overview">
                <div class="flag-overview-left">
                    <img id="nation-flag" src="images/Unknown Flag.png">
                    <p id="flag-name">${p.FlagName||"Flag Name"}</p>
                </div>
                <div class="flag-overview-right">
                    <div><span class="flag-overview-title">Flag ID: </span>${p.FlagID}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Ideologies: </span>${p.Ideologies.length}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Laws: </span>${Object.keys(p.Laws).length}<span class="flag-overview-content"></span></div>
                </div>
            </div>
        </button>
        <div class="flag-contents">
            <button class="delete-flag-button">Delete Flag</button>
            
            <div class="flag-label"><span class="flag-title">Name: </span><input class="flag-input flag-name-input" value="${p.FlagName}"></div>
            <div class="flag-label"><span class="flag-title">Image ID: </span><input class="flag-input flag-image-input" value="${p.FlagID}"></div>
            <div class="flag-label"><span class="flag-title">Description/Sources: </span><input class="flag-input flag-description-input" value="${p.Description}"></div>
            
            <div class="ideologies">
                <ul>
                    <li>
                        <button type="button" class="btn">Non-Aligned</button>
                        <ul>
                            <li>
                                <button style="color: #F3B6B6;" type="button" class="btn">Socialism</button>
                                <ul>
                                    <li><button style="color: #F37B7B;" type="button" class="btn">Communism</button></li>
                                </ul>
                            </li>
                            <li>
                                <button style="color: #B5B6F3;" type="button" class="btn">Liberalism</button>
                                <ul>
                                    <li><button style="color: #7B7BF3;" type="button" class="btn">Democracy</button></li>
                                </ul>
                            </li>
                            <li>
                                <button style="color: #B8B8B9;" type="button" class="btn">Nationalism</button>
                                <ul>
                                    <li><button style="color: #7B7B7B;" type="button" class="btn">Fascism</button></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            
            <div class="laws">
                <div class="laws-selection">
                    <img src="https://media.tenor.com/3xTqDrUgvvIAAAAi/error-404.gif" alt="Loading..." class="loading-gif">
                </div>
                <div class="laws-name"></div>
                <div class="laws-level"></div>
            </div>
        </div>
    `,c.querySelector(".delete-flag-button").addEventListener("click",()=>{Gt(d),ae()}),c.querySelector(".flag-name-input").addEventListener("input",m=>{G.Flags[d].FlagName=m.target.value,ae()}),c.querySelector(".flag-image-input").addEventListener("input",m=>{G.Flags[d].FlagID=m.target.value,ae()}),c.querySelector(".flag-description-input").addEventListener("input",m=>{G.Flags[d].Description=m.target.value,ae()}),c}function Rt(p){G.NationName=p,ae()}document.addEventListener("DOMContentLoaded",()=>{const p=document.querySelector(".new-flag-button button");p&&p.addEventListener("click",()=>{qt(),ae()})});Pt();window.switchTab=jt;window.generateLawsList=_e;window.generateNationsList=Ze;window.nationsSearchFilter=Vt;
