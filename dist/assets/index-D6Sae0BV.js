(function(){const b=document.createElement("link").relList;if(b&&b.supports&&b.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const u of s)if(u.type==="childList")for(const c of u.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&a(c)}).observe(document,{childList:!0,subtree:!0});function f(s){const u={};return s.integrity&&(u.integrity=s.integrity),s.referrerPolicy&&(u.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?u.credentials="include":s.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function a(s){if(s.ep)return;s.ep=!0;const u=f(s);fetch(s.href,u)}})();var ze=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={exports:{}},Ct=he.exports,Xe;function Ft(){return Xe||(Xe=1,(function(E,b){(function(f,a,s){var u=b&&!b.nodeType&&b,c=E&&!E.nodeType&&E,g=u&&c&&typeof ze=="object"&&ze,K=c&&c.exports===u&&u;g&&(g.global===g||g.window===g||g.self===g)&&(f=g),s(u&&c?K?c.exports:u:f[a]={})})(Ct,"luaparse",function(f){f.version="0.3.1";var a,s,u,c,g,K=f.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function A(e,t){return t=t||0,e<128?String.fromCharCode(e):e<2048?String.fromCharCode(t|192|e>>6,t|128|e&63):e<65536?String.fromCharCode(t|224|e>>12,t|128|e>>6&63,t|128|e&63):e<1114112?String.fromCharCode(t|240|e>>18,t|128|e>>12&63,t|128|e>>6&63,t|128|e&63):null}function ee(e,t){for(var r=e.toString(16);r.length<t;)r="0"+r;return r}function ge(e){return function(t){var r=e.exec(t);if(!r)return t;v(null,h.invalidCodeUnit,ee(r[0].charCodeAt(0),4).toUpperCase())}}var ve={"pseudo-latin1":{fixup:ge(/[^\x00-\xff]/),encodeByte:function(e){return e===null?"":String.fromCharCode(e)},encodeUTF8:function(e){return A(e)}},"x-user-defined":{fixup:ge(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return e===null?"":e>=128?String.fromCharCode(e|63232):String.fromCharCode(e)},encodeUTF8:function(e){return A(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},ae=1,R=2,M=4,P=8,ie=16,q=32,se=64,oe=128,le=256;f.tokenTypes={EOF:ae,StringLiteral:R,Keyword:M,Identifier:P,NumericLiteral:ie,Punctuator:q,BooleanLiteral:se,NilLiteral:oe,VarargLiteral:le};var h=f.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},p=f.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,r,i){return{type:"FunctionDeclaration",identifier:e,isLocal:r,parameters:t,body:i}},forNumericStatement:function(e,t,r,i,o){return{type:"ForNumericStatement",variable:e,start:t,end:r,step:i,body:o}},forGenericStatement:function(e,t,r){return{type:"ForGenericStatement",variables:e,iterators:t,body:r}},chunk:function(e){return{type:"Chunk",body:e}},identifier:function(e){return{type:"Identifier",name:e}},literal:function(e,t,r){return e=e===R?"StringLiteral":e===ie?"NumericLiteral":e===se?"BooleanLiteral":e===oe?"NilLiteral":"VarargLiteral",{type:e,value:t,raw:r}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,r){var i=e==="and"||e==="or"?"LogicalExpression":"BinaryExpression";return{type:i,operator:e,left:t,right:r}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,r){return{type:"MemberExpression",indexer:t,identifier:r,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}}};function d(e){if(I){var t=B.pop();t.complete(),t.bless(e)}return s.onCreateNode&&s.onCreateNode(e),e}var Ee=Array.prototype.slice,we=function(e,t){for(var r=0,i=e.length;r<i;++r)if(e[r]===t)return r;return-1};Array.prototype.indexOf&&(we=function(e,t){return e.indexOf(t)});function _e(e,t,r){for(var i=0,o=e.length;i<o;++i)if(e[i][t]===r)return i;return-1}function ce(e){var t=Ee.call(arguments,1);return e=e.replace(/%(\d)/g,function(r,i){return""+t[i-1]||""}),e}var Ae=function(e){for(var t=Ee.call(arguments,1),r,i,o=0,m=t.length;o<m;++o){r=t[o];for(i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e};Object.assign&&(Ae=Object.assign),f.SyntaxError=SyntaxError;function Pe(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function v(e){var t=ce.apply(null,Ee.call(arguments,1)),r,i;throw e===null||typeof e.line>"u"?(i=n-F+1,r=Pe(new SyntaxError(ce("[%1:%2] %3",T,i,t))),r.index=n,r.line=T,r.column=i):(i=e.range[0]-e.lineStart,r=Pe(new SyntaxError(ce("[%1:%2] %3",e.line,i,t))),r.line=e.line,r.index=e.range[0],r.column=i),r}function ue(e){var t=a.slice(e.range[0],e.range[1]);return t||e.value}function Q(e,t){v(t,h.expectedToken,e,ue(t))}function fe(e){var t=ue(Y);if(typeof e.type<"u"){var r;switch(e.type){case R:r="string";break;case M:r="keyword";break;case P:r="identifier";break;case ie:r="number";break;case q:r="symbol";break;case se:r="boolean";break;case oe:return v(e,h.unexpected,"symbol","nil",t);case ae:return v(e,h.unexpectedEOF)}return v(e,h.unexpected,r,ue(e),t)}return v(e,h.unexpected,"symbol",e,t)}var n,l,U,Y,Ne,w,T,F;f.lex=Oe;function Oe(){for(ke();a.charCodeAt(n)===45&&a.charCodeAt(n+1)===45;)ct(),ke();if(n>=u)return{type:ae,value:"<eof>",line:T,lineStart:F,range:[n,n]};var e=a.charCodeAt(n),t=a.charCodeAt(n+1);if(w=n,ft(e))return $e();switch(e){case 39:case 34:return tt();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return je();case 46:return J(t)?je():t===46?a.charCodeAt(n+2)===46?et():k(".."):k(".");case 61:return k(t===61?"==":"=");case 62:return c.bitwiseOperators&&t===62?k(">>"):k(t===61?">=":">");case 60:return c.bitwiseOperators&&t===60?k("<<"):k(t===61?"<=":"<");case 126:if(t===61)return k("~=");if(!c.bitwiseOperators)break;return k("~");case 58:return c.labels&&t===58?k("::"):k(":");case 91:return t===91||t===61?rt():k("[");case 47:return c.integerDivision&&t===47?k("//"):k("/");case 38:case 124:if(!c.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return k(a.charAt(n))}return fe(a.charAt(n))}function ye(){var e=a.charCodeAt(n),t=a.charCodeAt(n+1);return pe(e)?(e===10&&t===13&&++n,e===13&&t===10&&++n,++T,F=++n,!0):!1}function ke(){for(;n<u;){var e=a.charCodeAt(n);if(ut(e))++n;else if(!ye())break}}function $e(){for(var e,t;pt(a.charCodeAt(++n)););return e=g.fixup(a.slice(w,n)),dt(e)?t=M:e==="true"||e==="false"?(t=se,e=e==="true"):e==="nil"?(t=oe,e=null):t=P,{type:t,value:e,line:T,lineStart:F,range:[w,n]}}function k(e){return n+=e.length,{type:q,value:e,line:T,lineStart:F,range:[w,n]}}function et(){return n+=3,{type:le,value:"...",line:T,lineStart:F,range:[w,n]}}function tt(){for(var e=a.charCodeAt(n++),t=T,r=F,i=n,o=g.discardStrings?null:"",m;m=a.charCodeAt(n++),e!==m;)if((n>u||pe(m))&&(o+=a.slice(i,n-1),v(null,h.unfinishedString,a.slice(w,n-1))),m===92){if(!g.discardStrings){var y=a.slice(i,n-1);o+=g.fixup(y)}var O=lt();g.discardStrings||(o+=O),i=n}return g.discardStrings||(o+=g.encodeByte(null),o+=g.fixup(a.slice(i,n-1))),{type:R,value:o,line:t,lineStart:r,lastLine:T,lastLineStart:F,range:[w,n]}}function rt(){var e=T,t=F,r=Ve(!1);return r===!1&&v(l,h.expected,"[",ue(l)),{type:R,value:g.discardStrings?null:g.fixup(r),line:e,lineStart:t,lastLine:T,lastLineStart:F,range:[w,n]}}function je(){var e=a.charAt(n),t=a.charAt(n+1),r=e==="0"&&"xX".indexOf(t||null)>=0?it():st(),i=nt(),o=at();return o&&(i||r.hasFractionPart)&&v(null,h.malformedNumber,a.slice(w,n)),{type:ie,value:r.value,line:T,lineStart:F,range:[w,n]}}function nt(){if(c.imaginaryNumbers)return"iI".indexOf(a.charAt(n)||null)>=0?(++n,!0):!1}function at(){if(c.integerSuffixes){if("uU".indexOf(a.charAt(n)||null)>=0)if(++n,"lL".indexOf(a.charAt(n)||null)>=0){if(++n,"lL".indexOf(a.charAt(n)||null)>=0)return++n,"ULL";v(null,h.malformedNumber,a.slice(w,n))}else v(null,h.malformedNumber,a.slice(w,n));else if("lL".indexOf(a.charAt(n)||null)>=0){if(++n,"lL".indexOf(a.charAt(n)||null)>=0)return++n,"LL";v(null,h.malformedNumber,a.slice(w,n))}}}function it(){var e=0,t=1,r=1,i,o,m,y;for(y=n+=2,Z(a.charCodeAt(n))||v(null,h.malformedNumber,a.slice(w,n));Z(a.charCodeAt(n));)++n;i=parseInt(a.slice(y,n),16);var O=!1;if(a.charAt(n)==="."){for(O=!0,o=++n;Z(a.charCodeAt(n));)++n;e=a.slice(o,n),e=o===n?0:parseInt(e,16)/Math.pow(16,n-o)}var Le=!1;if("pP".indexOf(a.charAt(n)||null)>=0){for(Le=!0,++n,"+-".indexOf(a.charAt(n)||null)>=0&&(r=a.charAt(n++)==="+"?1:-1),m=n,J(a.charCodeAt(n))||v(null,h.malformedNumber,a.slice(w,n));J(a.charCodeAt(n));)++n;t=a.slice(m,n),t=Math.pow(2,t*r)}return{value:(i+e)*t,hasFractionPart:O||Le}}function st(){for(;J(a.charCodeAt(n));)++n;var e=!1;if(a.charAt(n)===".")for(e=!0,++n;J(a.charCodeAt(n));)++n;var t=!1;if("eE".indexOf(a.charAt(n)||null)>=0)for(t=!0,++n,"+-".indexOf(a.charAt(n)||null)>=0&&++n,J(a.charCodeAt(n))||v(null,h.malformedNumber,a.slice(w,n));J(a.charCodeAt(n));)++n;return{value:parseFloat(a.slice(w,n)),hasFractionPart:e||t}}function ot(){var e=n++;for(a.charAt(n++)!=="{"&&v(null,h.braceExpected,"{","\\"+a.slice(e,n)),Z(a.charCodeAt(n))||v(null,h.hexadecimalDigitExpected,"\\"+a.slice(e,n));a.charCodeAt(n)===48;)++n;for(var t=n;Z(a.charCodeAt(n));)++n,n-t>6&&v(null,h.tooLargeCodepoint,"\\"+a.slice(e,n));var r=a.charAt(n++);r!=="}"&&(r==='"'||r==="'"?v(null,h.braceExpected,"}","\\"+a.slice(e,n--)):v(null,h.hexadecimalDigitExpected,"\\"+a.slice(e,n)));var i=parseInt(a.slice(t,n-1)||"0",16),o="\\"+a.slice(e,n);return i>1114111&&v(null,h.tooLargeCodepoint,o),g.encodeUTF8(i,o)}function lt(){var e=n;switch(a.charAt(n)){case"a":return++n,"\x07";case"n":return++n,`
`;case"r":return++n,"\r";case"t":return++n,"	";case"v":return++n,"\v";case"b":return++n,"\b";case"f":return++n,"\f";case"\r":case`
`:return ye(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;J(a.charCodeAt(n))&&n-e<3;)++n;var t=a.slice(e,n),r=parseInt(t,10);return r>255&&v(null,h.decimalEscapeTooLarge,"\\"+r),g.encodeByte(r,"\\"+t);case"z":if(c.skipWhitespaceEscape)return++n,ke(),"";break;case"x":if(c.hexEscapes){if(Z(a.charCodeAt(n+1))&&Z(a.charCodeAt(n+2)))return n+=3,g.encodeByte(parseInt(a.slice(e+1,n),16),"\\"+a.slice(e,n));v(null,h.hexadecimalDigitExpected,"\\"+a.slice(e,n+2))}break;case"u":if(c.unicodeEscapes)return ot();break;case"\\":case'"':case"'":return a.charAt(n++)}return c.strictEscapes&&v(null,h.invalidEscape,"\\"+a.slice(e,n+1)),a.charAt(n++)}function ct(){w=n,n+=2;var e=a.charAt(n),t="",r=!1,i=n,o=F,m=T;if(e==="["&&(t=Ve(!0),t===!1?t=e:r=!0),!r){for(;n<u&&!pe(a.charCodeAt(n));)++n;s.comments&&(t=a.slice(i,n))}if(s.comments){var y=p.comment(t,a.slice(w,n));s.locations&&(y.loc={start:{line:m,column:w-o},end:{line:T,column:n-F}}),s.ranges&&(y.range=[w,n]),s.onCreateNode&&s.onCreateNode(y),Ne.push(y)}}function Ve(e){var t=0,r="",i=!1,o,m,y=T;for(++n;a.charAt(n+t)==="=";)++t;if(a.charAt(n+t)!=="[")return!1;for(n+=t+1,pe(a.charCodeAt(n))&&ye(),m=n;n<u;){for(;pe(a.charCodeAt(n));)ye();if(o=a.charAt(n++),o==="]"){i=!0;for(var O=0;O<t;++O)a.charAt(n+O)!=="="&&(i=!1);a.charAt(n+t)!=="]"&&(i=!1)}if(i)return r+=a.slice(m,n-1),n+=t+1,r}v(null,e?h.unfinishedLongComment:h.unfinishedLongString,y,"<eof>")}function S(){U=l,l=Y,Y=Oe()}function L(e){return e===l.value?(S(),!0):!1}function x(e){e===l.value?S():v(l,h.expected,e,ue(l))}function ut(e){return e===9||e===32||e===11||e===12}function pe(e){return e===10||e===13}function J(e){return e>=48&&e<=57}function Z(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function ft(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||c.extendedIdentifiers&&e>=128)}function pt(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||e>=48&&e<=57||c.extendedIdentifiers&&e>=128)}function dt(e){switch(e.length){case 2:return e==="do"||e==="if"||e==="in"||e==="or";case 3:return e==="and"||e==="end"||e==="for"||e==="not";case 4:return e==="else"||e==="then"?!0:c.labels&&!c.contextualGoto?e==="goto":!1;case 5:return e==="break"||e==="local"||e==="until"||e==="while";case 6:return e==="elseif"||e==="repeat"||e==="return";case 8:return e==="function"}return!1}function mt(e){return q===e.type?"#-~".indexOf(e.value)>=0:M===e.type?e.value==="not":!1}function ht(e){if(ae===e.type)return!0;if(M!==e.type)return!1;switch(e.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var _,te,be;function j(){var e=_[te++].slice();_.push(e),s.onCreateScope&&s.onCreateScope()}function V(){_.pop(),--te,s.onDestroyScope&&s.onDestroyScope()}function Ie(e){s.onLocalDeclaration&&s.onLocalDeclaration(e),we(_[te],e)===-1&&_[te].push(e)}function de(e){Ie(e.name),me(e,!0)}function me(e,t){!t&&_e(be,"name",e.name)===-1&&be.push(e),e.isLocal=t}function Te(e){return we(_[te],e)!==-1}var B=[],I;function W(){return new Se(l)}function Se(e){s.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),s.ranges&&(this.range=[e.range[0],0])}Se.prototype.complete=function(){s.locations&&(this.loc.end.line=U.lastLine||U.line,this.loc.end.column=U.range[1]-(U.lastLineStart||U.lineStart)),s.ranges&&(this.range[1]=U.range[1])},Se.prototype.bless=function(e){if(this.loc){var t=this.loc;e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}}this.range&&(e.range=[this.range[0],this.range[1]])};function re(){I&&B.push(W())}function D(e){I&&B.push(e)}function H(){this.scopes=[],this.pendingGotos=[]}H.prototype.isInLoop=function(){for(var e=this.scopes.length;e-- >0;)if(this.scopes[e].isLoop)return!0;return!1},H.prototype.pushScope=function(e){var t={labels:{},locals:[],deferredGotos:[],isLoop:!!e};this.scopes.push(t)},H.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&v(t.token,h.labelNotVisible,t.target)}this.scopes.pop()},H.prototype.addGoto=function(e,t){for(var r=[],i=0;i<this.scopes.length;++i){var o=this.scopes[i];if(r.push(o.locals.length),Object.prototype.hasOwnProperty.call(o.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:r})},H.prototype.addLabel=function(e,t){var r=this.currentScope();if(Object.prototype.hasOwnProperty.call(r.labels,e))v(t,h.labelAlreadyDefined,e,r.labels[e].line);else{for(var i=[],o=0;o<this.pendingGotos.length;++o){var m=this.pendingGotos[o];if(m.maxDepth>=this.scopes.length&&m.target===e){m.localCounts[this.scopes.length-1]<r.locals.length&&r.deferredGotos.push(m);continue}i.push(m)}this.pendingGotos=i}r.labels[e]={localCount:r.locals.length,line:t.line}},H.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},H.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},H.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,r=0;r<t.length;++r){var i=t[r];v(i.token,h.gotoJumpInLocalScope,i.target,e.locals[i.localCounts[this.scopes.length-1]].name)}};function z(){this.level=0,this.loopLevels=[]}z.prototype.isInLoop=function(){return!!this.loopLevels.length},z.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},z.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},z.prototype.addGoto=z.prototype.addLabel=function(){throw new Error("This should never happen")},z.prototype.addLocal=z.prototype.raiseDeferredErrors=function(){};function Ge(){return c.labels?new H:new z}function gt(){S(),re(),s.scope&&j();var e=Ge();e.allowVararg=!0,e.pushScope();var t=G(e);return e.popScope(),s.scope&&V(),ae!==l.type&&fe(l),I&&!t.length&&(U=l),d(p.chunk(t))}function G(e){for(var t=[],r;!ht(l);){if(l.value==="return"||!c.relaxedBreak&&l.value==="break"){t.push(Ke(e));break}r=Ke(e),L(";"),r&&t.push(r)}return t}function Ke(e){if(re(),q===l.type&&L("::"))return vt(e);if(c.emptyStatement&&L(";")){I&&B.pop();return}if(e.raiseDeferredErrors(),M===l.type)switch(l.value){case"local":return S(),At(e);case"if":return S(),Et(e);case"return":return S(),Lt(e);case"function":S();var t=Ot();return Ce(t);case"while":return S(),St(e);case"for":return S(),wt(e);case"repeat":return S(),xt(e);case"break":return S(),e.isInLoop()||v(l,h.noLoopToBreak,l.value),yt();case"do":return S(),bt(e);case"goto":return S(),Re(e)}return c.contextualGoto&&l.type===P&&l.value==="goto"&&Y.type===P&&Y.value!=="goto"?(S(),Re(e)):(I&&B.pop(),Nt(e))}function vt(e){var t=l,r=C();return s.scope&&(Ie("::"+t.value+"::"),me(r,!0)),x("::"),e.addLabel(t.value,t),d(p.labelStatement(r))}function yt(){return d(p.breakStatement())}function Re(e){var t=l.value,r=U,i=C();return e.addGoto(t,r),d(p.gotoStatement(i))}function bt(e){s.scope&&j(),e.pushScope();var t=G(e);return e.popScope(),s.scope&&V(),x("end"),d(p.doStatement(t))}function St(e){var t=N(e);x("do"),s.scope&&j(),e.pushScope(!0);var r=G(e);return e.popScope(),s.scope&&V(),x("end"),d(p.whileStatement(t,r))}function xt(e){s.scope&&j(),e.pushScope(!0);var t=G(e);x("until"),e.raiseDeferredErrors();var r=N(e);return e.popScope(),s.scope&&V(),d(p.repeatStatement(r,t))}function Lt(e){var t=[];if(l.value!=="end"){var r=xe(e);for(r!=null&&t.push(r);L(",");)r=N(e),t.push(r);L(";")}return d(p.returnStatement(t))}function Et(e){var t=[],r,i,o;for(I&&(o=B[B.length-1],B.push(o)),r=N(e),x("then"),s.scope&&j(),e.pushScope(),i=G(e),e.popScope(),s.scope&&V(),t.push(d(p.ifClause(r,i))),I&&(o=W());L("elseif");)D(o),r=N(e),x("then"),s.scope&&j(),e.pushScope(),i=G(e),e.popScope(),s.scope&&V(),t.push(d(p.elseifClause(r,i))),I&&(o=W());return L("else")&&(I&&(o=new Se(U),B.push(o)),s.scope&&j(),e.pushScope(),i=G(e),e.popScope(),s.scope&&V(),t.push(d(p.elseClause(i)))),x("end"),d(p.ifStatement(t))}function wt(e){var t=C(),r;if(s.scope&&(j(),de(t)),L("=")){var i=N(e);x(",");var o=N(e),m=L(",")?N(e):null;return x("do"),e.pushScope(!0),r=G(e),e.popScope(),x("end"),s.scope&&V(),d(p.forNumericStatement(t,i,o,m,r))}else{for(var y=[t];L(",");)t=C(),s.scope&&de(t),y.push(t);x("in");var O=[];do{var Le=N(e);O.push(Le)}while(L(","));return x("do"),e.pushScope(!0),r=G(e),e.popScope(),x("end"),s.scope&&V(),d(p.forGenericStatement(y,O,r))}}function At(e){var t,r=U;if(P===l.type){var i=[],o=[];do t=C(),i.push(t),e.addLocal(t.name,r);while(L(","));if(L("="))do{var m=N(e);o.push(m)}while(L(","));if(s.scope)for(var y=0,O=i.length;y<O;++y)de(i[y]);return d(p.localStatement(i,o))}if(L("function"))return t=C(),e.addLocal(t.name,r),s.scope&&(de(t),j()),Ce(t,!0);Q("<name>",l)}function Nt(e){var t,r,i,o,m,y=[];I&&(r=W());do{if(I&&(t=W()),P===l.type)m=l.value,o=C(),s.scope&&me(o,Te(m)),i=!0;else if(l.value==="(")S(),o=N(e),x(")"),i=!1;else return fe(l);e:for(;;){switch(R===l.type?'"':l.value){case".":case"[":i=!0;break;case":":case"(":case"{":case'"':i=null;break;default:break e}o=We(o,t,e)}if(y.push(o),l.value!==",")break;if(!i)return fe(l);S()}while(!0);if(y.length===1&&i===null)return D(t),d(p.callStatement(y[0]));if(!i)return fe(l);x("=");var O=[];do O.push(N(e));while(L(","));return D(r),d(p.assignmentStatement(y,O))}function C(){re();var e=l.value;return P!==l.type&&Q("<name>",l),S(),d(p.identifier(e))}function Ce(e,t){var r=Ge();r.pushScope();var i=[];if(x("("),!L(")"))for(;;){if(P===l.type){var o=C();if(s.scope&&de(o),i.push(o),L(","))continue}else le===l.type?(r.allowVararg=!0,i.push(Be(r))):Q("<name> or '...'",l);x(")");break}var m=G(r);return r.popScope(),x("end"),s.scope&&V(),t=t||!1,d(p.functionStatement(e,i,t,m))}function Ot(){var e,t,r;for(I&&(r=W()),e=C(),s.scope&&(me(e,Te(e.name)),j());L(".");)D(r),t=C(),e=d(p.memberExpression(e,".",t));return L(":")&&(D(r),t=C(),e=d(p.memberExpression(e,":",t)),s.scope&&Ie("self")),e}function qe(e){for(var t=[],r,i;;){if(re(),q===l.type&&L("["))r=N(e),x("]"),x("="),i=N(e),t.push(d(p.tableKey(r,i)));else if(P===l.type)Y.value==="="?(r=C(),S(),i=N(e),t.push(d(p.tableKeyString(r,i)))):(i=N(e),t.push(d(p.tableValue(i))));else{if((i=xe(e))==null){B.pop();break}t.push(d(p.tableValue(i)))}if(",;".indexOf(l.value)>=0){S();continue}break}return x("}"),d(p.tableConstructorExpression(t))}function xe(e){var t=Fe(0,e);return t}function N(e){var t=xe(e);if(t==null)Q("<expression>",l);else return t}function kt(e){var t=e.charCodeAt(0),r=e.length;if(r===1)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(r===2)switch(t){case 47:return 10;case 46:return 8;case 60:case 62:return e==="<<"||e===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(t===97&&e==="and")return 2;return 0}function Fe(e,t){var r=l.value,i,o;if(I&&(o=W()),mt(l)){re(),S();var m=Fe(10,t);m==null&&Q("<expression>",l),i=d(p.unaryExpression(r,m))}if(i==null&&(i=Be(t),i==null&&(i=It(t))),i==null)return null;for(var y;r=l.value,y=q===l.type||M===l.type?kt(r):0,!(y===0||y<=e);){(r==="^"||r==="..")&&--y,S();var O=Fe(y,t);O==null&&Q("<expression>",l),I&&B.push(o),i=d(p.binaryExpression(r,i,O))}return i}function We(e,t,r){var i,o;if(q===l.type)switch(l.value){case"[":return D(t),S(),i=N(r),x("]"),d(p.indexExpression(e,i));case".":return D(t),S(),o=C(),d(p.memberExpression(e,".",o));case":":return D(t),S(),o=C(),e=d(p.memberExpression(e,":",o)),D(t),De(e,r);case"(":case"{":return D(t),De(e,r)}else if(R===l.type)return D(t),De(e,r);return null}function It(e){var t,r,i;if(I&&(i=W()),P===l.type)r=l.value,t=C(),s.scope&&me(t,Te(r));else if(L("("))t=N(e),x(")");else return null;for(;;){var o=We(t,i,e);if(o===null)break;t=o}return t}function De(e,t){if(q===l.type)switch(l.value){case"(":c.emptyStatement||l.line!==U.line&&v(null,h.ambiguousSyntax,l.value),S();var r=[],i=xe(t);for(i!=null&&r.push(i);L(",");)i=N(t),r.push(i);return x(")"),d(p.callExpression(e,r));case"{":re(),S();var o=qe(t);return d(p.tableCallExpression(e,o))}else if(R===l.type)return d(p.stringCallExpression(e,Be(t)));Q("function arguments",l)}function Be(e){var t=R|ie|se|oe|le,r=l.value,i=l.type,o;if(I&&(o=W()),i===le&&!e.allowVararg&&v(l,h.cannotUseVararg,l.value),i&t){D(o);var m=a.slice(l.range[0],l.range[1]);return S(),d(p.literal(i,r,m))}else{if(M===i&&r==="function")return D(o),S(),s.scope&&j(),Ce(null);if(L("{"))return D(o),qe(e)}}f.parse=Tt;var He={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Tt(e,t){if(typeof t>"u"&&typeof e=="object"&&(t=e,e=void 0),t||(t={}),a=e||"",s=Ae({},K,t),n=0,T=1,F=0,u=a.length,_=[[]],te=0,be=[],B=[],!Object.prototype.hasOwnProperty.call(He,s.luaVersion))throw new Error(ce("Lua version '%1' not supported",s.luaVersion));if(c=Ae({},He[s.luaVersion]),s.extendedIdentifiers!==void 0&&(c.extendedIdentifiers=!!s.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(ve,s.encodingMode))throw new Error(ce("Encoding mode '%1' not supported",s.encodingMode));return g=ve[s.encodingMode],s.comments&&(Ne=[]),s.wait?f:Je()}f.write=Me;function Me(e){return a+=String(e),u=a.length,f}f.end=Je;function Je(e){typeof e<"u"&&Me(e),a&&a.substr(0,2)==="#!"&&(a=a.replace(/^.*/,function(r){return r.replace(/./g," ")})),u=a.length,I=s.locations||s.ranges,Y=Oe();var t=gt();if(s.comments&&(t.comments=Ne),s.scope&&(t.globals=be),B.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return t}})})(he,he.exports)),he.exports}Ft();async function Dt(E,b="ronroblox"){try{const f=await fetch(`/api/fandom-image?filename=${encodeURIComponent(E)}&wiki=${encodeURIComponent(b)}`);if(!f.ok)throw new Error(`Failed to fetch image data: ${f.status}`);const a=await f.json();if(a.error)throw new Error(a.error);return a.url}catch(f){throw console.error(`Error fetching Fandom image URL for ${E}:`,f),f}}let X,Qe,$,Ue,ne=null;async function Bt(){return ne=(async()=>{try{const E=await fetch("/api/fandom-data");if(!E.ok)throw new Error(`HTTP ${E.status}`);const b=await E.json();if(X=b.Lawnames,Qe=b.Flagdata,$=b.Nationdata,Ue=b.Tagdata,console.log("✅ Data loaded successfully!"),console.log(X),console.log(Qe),console.log($),console.log(Ue),X?.lawNames?.Elective_Assembly?.Name){const f=X.lawNames.Elective_Assembly.Name;console.log(f)}await Ze(),await Ye()}catch(E){throw console.error("Error loading fandom data:",E),E}})(),ne}function Ut(E,b){let f,a,s;for(a=document.getElementsByClassName("tabcontent"),f=0;f<a.length;f++)a[f].classList.remove("tabcontent-visible"),a[f].classList.add("tabcontent-hidden");for(s=document.getElementsByClassName("tablinks"),f=0;f<s.length;f++)s[f].className=s[f].className.replace(" active","");document.getElementById(b).classList.remove("tabcontent-hidden"),document.getElementById(b).classList.add("tabcontent-visible"),E.currentTarget.className+=" active"}async function Ye(){!$?.nationdata&&ne&&(console.log("⏳ Waiting for data to load..."),await ne);const E=document.getElementsByClassName("nations-list"),b=36;function f(s,u){const c=document.createElement("li"),g=document.createElement("button"),K=document.createElement("span");K.classList.add("flag-image");const A=document.createElement("img");A.src=u,K.appendChild(A);const ee=document.createElement("span");return ee.textContent=s,g.appendChild(K),g.appendChild(ee),c.appendChild(g),c}function a(s){return s.includes("scale-to-width-down")?s.replace(/scale-to-width-down\/\d+/,`scale-to-width-down/${b}`):s.replace(/\/revision\/latest/,`/revision/latest/scale-to-width-down/${b}`)}for(let s of E){const u=s.parentElement.id;let c=[];u==="Nations"?c=Object.keys($.nationdata).filter(A=>$.nationdata[A].nation===!0).sort():u==="Releasables"?c=Object.keys($.nationdata).filter(A=>$.nationdata[A].nation===!1).sort():u==="Formables"&&(c=Object.values(Ue.Tags).filter(A=>A.FormableName).filter(A=>!A.Removed).map(A=>A.FormableName).sort());const g=c.map(A=>Dt(A+"_Flag.png")),K=await Promise.all(g);s.innerHTML="",c.forEach((A,ee)=>{const ge=a(K[ee]),ve=f(A,ge);s.appendChild(ve)})}}function Pt(){var E,b,f,a,s,u,c,g;for(E=document.getElementById("nations-search-filter"),b=E.value.toUpperCase(),f=document.getElementsByClassName("nations-list"),s=0;s<f.length;s++)for(u=f[s].getElementsByTagName("li"),a=0;a<u.length;a++)c=u[a].getElementsByTagName("span")[1],g=c.textContent||c.innerText,g.toUpperCase().indexOf(b)>-1?u[a].style.display="":u[a].style.display="none"}async function Ze(E){!X?.lawNames&&ne&&await ne;const b=document.querySelector(".laws-selection");if(console.log(b),!b){console.error("Element with class 'laws-selection' not found");return}if(!X||!X.lawNames){console.error("Lawnames data not loaded yet");return}b.innerHTML="";function f(s){const u=document.createElement("button");return u.classList.add("btn"),u.textContent=s,u}const a=Object.entries(X.lawNames).sort((s,u)=>s[1].Name.localeCompare(u[1].Name));for(let[s,u]of a){const c=f(u.Name);b.appendChild(c)}}Bt();window.switchTab=Ut;window.generateLawsList=Ze;window.generateNationsList=Ye;window.nationsSearchFilter=Pt;
