(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const d of i)if(d.type==="childList")for(const f of d.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function o(i){const d={};return i.integrity&&(d.integrity=i.integrity),i.referrerPolicy&&(d.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?d.credentials="include":i.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(i){if(i.ep)return;i.ep=!0;const d=o(i);fetch(i.href,d)}})();var Xe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},he={exports:{}},_t=he.exports,Ze;function Wt(){return Ze||(Ze=1,(function(c,l){(function(o,r,i){var d=l&&!l.nodeType&&l,f=c&&!c.nodeType&&c,m=d&&f&&typeof Xe=="object"&&Xe,N=f&&f.exports===d&&d;m&&(m.global===m||m.window===m||m.self===m)&&(o=m),i(d&&f?N?f.exports:d:o[r]={})})(_t,"luaparse",function(o){o.version="0.3.1";var r,i,d,f,m,N=o.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function g(e,t){return t=t||0,e<128?String.fromCharCode(e):e<2048?String.fromCharCode(t|192|e>>6,t|128|e&63):e<65536?String.fromCharCode(t|224|e>>12,t|128|e>>6&63,t|128|e&63):e<1114112?String.fromCharCode(t|240|e>>18,t|128|e>>12&63,t|128|e>>6&63,t|128|e&63):null}function C(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n}function Y(e){return function(t){var n=e.exec(t);if(!n)return t;w(null,y.invalidCodeUnit,C(n[0].charCodeAt(0),4).toUpperCase())}}var R={"pseudo-latin1":{fixup:Y(/[^\x00-\xff]/),encodeByte:function(e){return e===null?"":String.fromCharCode(e)},encodeUTF8:function(e){return g(e)}},"x-user-defined":{fixup:Y(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return e===null?"":e>=128?String.fromCharCode(e|63232):String.fromCharCode(e)},encodeUTF8:function(e){return g(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},H=1,U=2,B=4,$=8,ee=16,z=32,oe=64,le=128,ce=256;o.tokenTypes={EOF:H,StringLiteral:U,Keyword:B,Identifier:$,NumericLiteral:ee,Punctuator:z,BooleanLiteral:oe,NilLiteral:le,VarargLiteral:ce};var y=o.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},h=o.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,n,s){return{type:"FunctionDeclaration",identifier:e,isLocal:n,parameters:t,body:s}},forNumericStatement:function(e,t,n,s,u){return{type:"ForNumericStatement",variable:e,start:t,end:n,step:s,body:u}},forGenericStatement:function(e,t,n){return{type:"ForGenericStatement",variables:e,iterators:t,body:n}},chunk:function(e){return{type:"Chunk",body:e}},identifier:function(e){return{type:"Identifier",name:e}},literal:function(e,t,n){return e=e===U?"StringLiteral":e===ee?"NumericLiteral":e===oe?"BooleanLiteral":e===le?"NilLiteral":"VarargLiteral",{type:e,value:t,raw:n}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,n){var s=e==="and"||e==="or"?"LogicalExpression":"BinaryExpression";return{type:s,operator:e,left:t,right:n}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,n){return{type:"MemberExpression",indexer:t,identifier:n,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}}};function v(e){if(T){var t=M.pop();t.complete(),t.bless(e)}return i.onCreateNode&&i.onCreateNode(e),e}var Ee=Array.prototype.slice,Ne=function(e,t){for(var n=0,s=e.length;n<s;++n)if(e[n]===t)return n;return-1};Array.prototype.indexOf&&(Ne=function(e,t){return e.indexOf(t)});function dt(e,t,n){for(var s=0,u=e.length;s<u;++s)if(e[s][t]===n)return s;return-1}function ue(e){var t=Ee.call(arguments,1);return e=e.replace(/%(\d)/g,function(n,s){return""+t[s-1]||""}),e}var Fe=function(e){for(var t=Ee.call(arguments,1),n,s,u=0,b=t.length;u<b;++u){n=t[u];for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};Object.assign&&(Fe=Object.assign),o.SyntaxError=SyntaxError;function Pe(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function w(e){var t=ue.apply(null,Ee.call(arguments,1)),n,s;throw e===null||typeof e.line>"u"?(s=a-q+1,n=Pe(new SyntaxError(ue("[%1:%2] %3",D,s,t))),n.index=a,n.line=D,n.column=s):(s=e.range[0]-e.lineStart,n=Pe(new SyntaxError(ue("[%1:%2] %3",e.line,s,t))),n.line=e.line,n.index=e.range[0],n.column=s),n}function fe(e){var t=r.slice(e.range[0],e.range[1]);return t||e.value}function te(e,t){w(t,y.expectedToken,e,fe(t))}function pe(e){var t=fe(ne);if(typeof e.type<"u"){var n;switch(e.type){case U:n="string";break;case B:n="keyword";break;case $:n="identifier";break;case ee:n="number";break;case z:n="symbol";break;case oe:n="boolean";break;case le:return w(e,y.unexpected,"symbol","nil",t);case H:return w(e,y.unexpectedEOF)}return w(e,y.unexpected,n,fe(e),t)}return w(e,y.unexpected,"symbol",e,t)}var a,p,V,ne,Oe,F,D,q;o.lex=Ie;function Ie(){for(ke();r.charCodeAt(a)===45&&r.charCodeAt(a+1)===45;)Et(),ke();if(a>=d)return{type:H,value:"<eof>",line:D,lineStart:q,range:[a,a]};var e=r.charCodeAt(a),t=r.charCodeAt(a+1);if(F=a,Ft(e))return mt();switch(e){case 39:case 34:return ht();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Me();case 46:return Z(t)?Me():t===46?r.charCodeAt(a+2)===46?gt():A(".."):A(".");case 61:return A(t===61?"==":"=");case 62:return f.bitwiseOperators&&t===62?A(">>"):A(t===61?">=":">");case 60:return f.bitwiseOperators&&t===60?A("<<"):A(t===61?"<=":"<");case 126:if(t===61)return A("~=");if(!f.bitwiseOperators)break;return A("~");case 58:return f.labels&&t===58?A("::"):A(":");case 91:return t===91||t===61?vt():A("[");case 47:return f.integerDivision&&t===47?A("//"):A("/");case 38:case 124:if(!f.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return A(r.charAt(a))}return pe(r.charAt(a))}function be(){var e=r.charCodeAt(a),t=r.charCodeAt(a+1);return de(e)?(e===10&&t===13&&++a,e===13&&t===10&&++a,++D,q=++a,!0):!1}function ke(){for(;a<d;){var e=r.charCodeAt(a);if(Nt(e))++a;else if(!be())break}}function mt(){for(var e,t;Ot(r.charCodeAt(++a)););return e=m.fixup(r.slice(F,a)),It(e)?t=B:e==="true"||e==="false"?(t=oe,e=e==="true"):e==="nil"?(t=le,e=null):t=$,{type:t,value:e,line:D,lineStart:q,range:[F,a]}}function A(e){return a+=e.length,{type:z,value:e,line:D,lineStart:q,range:[F,a]}}function gt(){return a+=3,{type:ce,value:"...",line:D,lineStart:q,range:[F,a]}}function ht(){for(var e=r.charCodeAt(a++),t=D,n=q,s=a,u=m.discardStrings?null:"",b;b=r.charCodeAt(a++),e!==b;)if((a>d||de(b))&&(u+=r.slice(s,a-1),w(null,y.unfinishedString,r.slice(F,a-1))),b===92){if(!m.discardStrings){var S=r.slice(s,a-1);u+=m.fixup(S)}var I=xt();m.discardStrings||(u+=I),s=a}return m.discardStrings||(u+=m.encodeByte(null),u+=m.fixup(r.slice(s,a-1))),{type:U,value:u,line:t,lineStart:n,lastLine:D,lastLineStart:q,range:[F,a]}}function vt(){var e=D,t=q,n=Ve(!1);return n===!1&&w(p,y.expected,"[",fe(p)),{type:U,value:m.discardStrings?null:m.fixup(n),line:e,lineStart:t,lastLine:D,lastLineStart:q,range:[F,a]}}function Me(){var e=r.charAt(a),t=r.charAt(a+1),n=e==="0"&&"xX".indexOf(t||null)>=0?wt():St(),s=bt(),u=yt();return u&&(s||n.hasFractionPart)&&w(null,y.malformedNumber,r.slice(F,a)),{type:ee,value:n.value,line:D,lineStart:q,range:[F,a]}}function bt(){if(f.imaginaryNumbers)return"iI".indexOf(r.charAt(a)||null)>=0?(++a,!0):!1}function yt(){if(f.integerSuffixes){if("uU".indexOf(r.charAt(a)||null)>=0)if(++a,"lL".indexOf(r.charAt(a)||null)>=0){if(++a,"lL".indexOf(r.charAt(a)||null)>=0)return++a,"ULL";w(null,y.malformedNumber,r.slice(F,a))}else w(null,y.malformedNumber,r.slice(F,a));else if("lL".indexOf(r.charAt(a)||null)>=0){if(++a,"lL".indexOf(r.charAt(a)||null)>=0)return++a,"LL";w(null,y.malformedNumber,r.slice(F,a))}}}function wt(){var e=0,t=1,n=1,s,u,b,S;for(S=a+=2,re(r.charCodeAt(a))||w(null,y.malformedNumber,r.slice(F,a));re(r.charCodeAt(a));)++a;s=parseInt(r.slice(S,a),16);var I=!1;if(r.charAt(a)==="."){for(I=!0,u=++a;re(r.charCodeAt(a));)++a;e=r.slice(u,a),e=u===a?0:parseInt(e,16)/Math.pow(16,a-u)}var Le=!1;if("pP".indexOf(r.charAt(a)||null)>=0){for(Le=!0,++a,"+-".indexOf(r.charAt(a)||null)>=0&&(n=r.charAt(a++)==="+"?1:-1),b=a,Z(r.charCodeAt(a))||w(null,y.malformedNumber,r.slice(F,a));Z(r.charCodeAt(a));)++a;t=r.slice(b,a),t=Math.pow(2,t*n)}return{value:(s+e)*t,hasFractionPart:I||Le}}function St(){for(;Z(r.charCodeAt(a));)++a;var e=!1;if(r.charAt(a)===".")for(e=!0,++a;Z(r.charCodeAt(a));)++a;var t=!1;if("eE".indexOf(r.charAt(a)||null)>=0)for(t=!0,++a,"+-".indexOf(r.charAt(a)||null)>=0&&++a,Z(r.charCodeAt(a))||w(null,y.malformedNumber,r.slice(F,a));Z(r.charCodeAt(a));)++a;return{value:parseFloat(r.slice(F,a)),hasFractionPart:e||t}}function Lt(){var e=a++;for(r.charAt(a++)!=="{"&&w(null,y.braceExpected,"{","\\"+r.slice(e,a)),re(r.charCodeAt(a))||w(null,y.hexadecimalDigitExpected,"\\"+r.slice(e,a));r.charCodeAt(a)===48;)++a;for(var t=a;re(r.charCodeAt(a));)++a,a-t>6&&w(null,y.tooLargeCodepoint,"\\"+r.slice(e,a));var n=r.charAt(a++);n!=="}"&&(n==='"'||n==="'"?w(null,y.braceExpected,"}","\\"+r.slice(e,a--)):w(null,y.hexadecimalDigitExpected,"\\"+r.slice(e,a)));var s=parseInt(r.slice(t,a-1)||"0",16),u="\\"+r.slice(e,a);return s>1114111&&w(null,y.tooLargeCodepoint,u),m.encodeUTF8(s,u)}function xt(){var e=a;switch(r.charAt(a)){case"a":return++a,"\x07";case"n":return++a,`
`;case"r":return++a,"\r";case"t":return++a,"	";case"v":return++a,"\v";case"b":return++a,"\b";case"f":return++a,"\f";case"\r":case`
`:return be(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;Z(r.charCodeAt(a))&&a-e<3;)++a;var t=r.slice(e,a),n=parseInt(t,10);return n>255&&w(null,y.decimalEscapeTooLarge,"\\"+n),m.encodeByte(n,"\\"+t);case"z":if(f.skipWhitespaceEscape)return++a,ke(),"";break;case"x":if(f.hexEscapes){if(re(r.charCodeAt(a+1))&&re(r.charCodeAt(a+2)))return a+=3,m.encodeByte(parseInt(r.slice(e+1,a),16),"\\"+r.slice(e,a));w(null,y.hexadecimalDigitExpected,"\\"+r.slice(e,a+2))}break;case"u":if(f.unicodeEscapes)return Lt();break;case"\\":case'"':case"'":return r.charAt(a++)}return f.strictEscapes&&w(null,y.invalidEscape,"\\"+r.slice(e,a+1)),r.charAt(a++)}function Et(){F=a,a+=2;var e=r.charAt(a),t="",n=!1,s=a,u=q,b=D;if(e==="["&&(t=Ve(!0),t===!1?t=e:n=!0),!n){for(;a<d&&!de(r.charCodeAt(a));)++a;i.comments&&(t=r.slice(s,a))}if(i.comments){var S=h.comment(t,r.slice(F,a));i.locations&&(S.loc={start:{line:b,column:F-u},end:{line:D,column:a-q}}),i.ranges&&(S.range=[F,a]),i.onCreateNode&&i.onCreateNode(S),Oe.push(S)}}function Ve(e){var t=0,n="",s=!1,u,b,S=D;for(++a;r.charAt(a+t)==="=";)++t;if(r.charAt(a+t)!=="[")return!1;for(a+=t+1,de(r.charCodeAt(a))&&be(),b=a;a<d;){for(;de(r.charCodeAt(a));)be();if(u=r.charAt(a++),u==="]"){s=!0;for(var I=0;I<t;++I)r.charAt(a+I)!=="="&&(s=!1);r.charAt(a+t)!=="]"&&(s=!1)}if(s)return n+=r.slice(b,a-1),a+=t+1,n}w(null,e?y.unfinishedLongComment:y.unfinishedLongString,S,"<eof>")}function L(){V=p,p=ne,ne=Ie()}function E(e){return e===p.value?(L(),!0):!1}function x(e){e===p.value?L():w(p,y.expected,e,fe(p))}function Nt(e){return e===9||e===32||e===11||e===12}function de(e){return e===10||e===13}function Z(e){return e>=48&&e<=57}function re(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function Ft(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||f.extendedIdentifiers&&e>=128)}function Ot(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||e>=48&&e<=57||f.extendedIdentifiers&&e>=128)}function It(e){switch(e.length){case 2:return e==="do"||e==="if"||e==="in"||e==="or";case 3:return e==="and"||e==="end"||e==="for"||e==="not";case 4:return e==="else"||e==="then"?!0:f.labels&&!f.contextualGoto?e==="goto":!1;case 5:return e==="break"||e==="local"||e==="until"||e==="while";case 6:return e==="elseif"||e==="repeat"||e==="return";case 8:return e==="function"}return!1}function kt(e){return z===e.type?"#-~".indexOf(e.value)>=0:B===e.type?e.value==="not":!1}function At(e){if(H===e.type)return!0;if(B!==e.type)return!1;switch(e.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var ae,ie,ye;function G(){var e=ae[ie++].slice();ae.push(e),i.onCreateScope&&i.onCreateScope()}function K(){ae.pop(),--ie,i.onDestroyScope&&i.onDestroyScope()}function Ae(e){i.onLocalDeclaration&&i.onLocalDeclaration(e),Ne(ae[ie],e)===-1&&ae[ie].push(e)}function me(e){Ae(e.name),ge(e,!0)}function ge(e,t){!t&&dt(ye,"name",e.name)===-1&&ye.push(e),e.isLocal=t}function Te(e){return Ne(ae[ie],e)!==-1}var M=[],T;function J(){return new we(p)}function we(e){i.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),i.ranges&&(this.range=[e.range[0],0])}we.prototype.complete=function(){i.locations&&(this.loc.end.line=V.lastLine||V.line,this.loc.end.column=V.range[1]-(V.lastLineStart||V.lineStart)),i.ranges&&(this.range[1]=V.range[1])},we.prototype.bless=function(e){if(this.loc){var t=this.loc;e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}}this.range&&(e.range=[this.range[0],this.range[1]])};function se(){T&&M.push(J())}function P(e){T&&M.push(e)}function X(){this.scopes=[],this.pendingGotos=[]}X.prototype.isInLoop=function(){for(var e=this.scopes.length;e-- >0;)if(this.scopes[e].isLoop)return!0;return!1},X.prototype.pushScope=function(e){var t={labels:{},locals:[],deferredGotos:[],isLoop:!!e};this.scopes.push(t)},X.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&w(t.token,y.labelNotVisible,t.target)}this.scopes.pop()},X.prototype.addGoto=function(e,t){for(var n=[],s=0;s<this.scopes.length;++s){var u=this.scopes[s];if(n.push(u.locals.length),Object.prototype.hasOwnProperty.call(u.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:n})},X.prototype.addLabel=function(e,t){var n=this.currentScope();if(Object.prototype.hasOwnProperty.call(n.labels,e))w(t,y.labelAlreadyDefined,e,n.labels[e].line);else{for(var s=[],u=0;u<this.pendingGotos.length;++u){var b=this.pendingGotos[u];if(b.maxDepth>=this.scopes.length&&b.target===e){b.localCounts[this.scopes.length-1]<n.locals.length&&n.deferredGotos.push(b);continue}s.push(b)}this.pendingGotos=s}n.labels[e]={localCount:n.locals.length,line:t.line}},X.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},X.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},X.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,n=0;n<t.length;++n){var s=t[n];w(s.token,y.gotoJumpInLocalScope,s.target,e.locals[s.localCounts[this.scopes.length-1]].name)}};function Q(){this.level=0,this.loopLevels=[]}Q.prototype.isInLoop=function(){return!!this.loopLevels.length},Q.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},Q.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},Q.prototype.addGoto=Q.prototype.addLabel=function(){throw new Error("This should never happen")},Q.prototype.addLocal=Q.prototype.raiseDeferredErrors=function(){};function Ge(){return f.labels?new X:new Q}function Tt(){L(),se(),i.scope&&G();var e=Ge();e.allowVararg=!0,e.pushScope();var t=_(e);return e.popScope(),i.scope&&K(),H!==p.type&&pe(p),T&&!t.length&&(V=p),v(h.chunk(t))}function _(e){for(var t=[],n;!At(p);){if(p.value==="return"||!f.relaxedBreak&&p.value==="break"){t.push(Re(e));break}n=Re(e),E(";"),n&&t.push(n)}return t}function Re(e){if(se(),z===p.type&&E("::"))return Ct(e);if(f.emptyStatement&&E(";")){T&&M.pop();return}if(e.raiseDeferredErrors(),B===p.type)switch(p.value){case"local":return L(),Mt(e);case"if":return L(),qt(e);case"return":return L(),Ut(e);case"function":L();var t=Gt();return Ce(t);case"while":return L(),$t(e);case"for":return L(),Pt(e);case"repeat":return L(),jt(e);case"break":return L(),e.isInLoop()||w(p,y.noLoopToBreak,p.value),Bt();case"do":return L(),Dt(e);case"goto":return L(),He(e)}return f.contextualGoto&&p.type===$&&p.value==="goto"&&ne.type===$&&ne.value!=="goto"?(L(),He(e)):(T&&M.pop(),Vt(e))}function Ct(e){var t=p,n=j();return i.scope&&(Ae("::"+t.value+"::"),ge(n,!0)),x("::"),e.addLabel(t.value,t),v(h.labelStatement(n))}function Bt(){return v(h.breakStatement())}function He(e){var t=p.value,n=V,s=j();return e.addGoto(t,n),v(h.gotoStatement(s))}function Dt(e){i.scope&&G(),e.pushScope();var t=_(e);return e.popScope(),i.scope&&K(),x("end"),v(h.doStatement(t))}function $t(e){var t=O(e);x("do"),i.scope&&G(),e.pushScope(!0);var n=_(e);return e.popScope(),i.scope&&K(),x("end"),v(h.whileStatement(t,n))}function jt(e){i.scope&&G(),e.pushScope(!0);var t=_(e);x("until"),e.raiseDeferredErrors();var n=O(e);return e.popScope(),i.scope&&K(),v(h.repeatStatement(n,t))}function Ut(e){var t=[];if(p.value!=="end"){var n=Se(e);for(n!=null&&t.push(n);E(",");)n=O(e),t.push(n);E(";")}return v(h.returnStatement(t))}function qt(e){var t=[],n,s,u;for(T&&(u=M[M.length-1],M.push(u)),n=O(e),x("then"),i.scope&&G(),e.pushScope(),s=_(e),e.popScope(),i.scope&&K(),t.push(v(h.ifClause(n,s))),T&&(u=J());E("elseif");)P(u),n=O(e),x("then"),i.scope&&G(),e.pushScope(),s=_(e),e.popScope(),i.scope&&K(),t.push(v(h.elseifClause(n,s))),T&&(u=J());return E("else")&&(T&&(u=new we(V),M.push(u)),i.scope&&G(),e.pushScope(),s=_(e),e.popScope(),i.scope&&K(),t.push(v(h.elseClause(s)))),x("end"),v(h.ifStatement(t))}function Pt(e){var t=j(),n;if(i.scope&&(G(),me(t)),E("=")){var s=O(e);x(",");var u=O(e),b=E(",")?O(e):null;return x("do"),e.pushScope(!0),n=_(e),e.popScope(),x("end"),i.scope&&K(),v(h.forNumericStatement(t,s,u,b,n))}else{for(var S=[t];E(",");)t=j(),i.scope&&me(t),S.push(t);x("in");var I=[];do{var Le=O(e);I.push(Le)}while(E(","));return x("do"),e.pushScope(!0),n=_(e),e.popScope(),x("end"),i.scope&&K(),v(h.forGenericStatement(S,I,n))}}function Mt(e){var t,n=V;if($===p.type){var s=[],u=[];do t=j(),s.push(t),e.addLocal(t.name,n);while(E(","));if(E("="))do{var b=O(e);u.push(b)}while(E(","));if(i.scope)for(var S=0,I=s.length;S<I;++S)me(s[S]);return v(h.localStatement(s,u))}if(E("function"))return t=j(),e.addLocal(t.name,n),i.scope&&(me(t),G()),Ce(t,!0);te("<name>",p)}function Vt(e){var t,n,s,u,b,S=[];T&&(n=J());do{if(T&&(t=J()),$===p.type)b=p.value,u=j(),i.scope&&ge(u,Te(b)),s=!0;else if(p.value==="(")L(),u=O(e),x(")"),s=!1;else return pe(p);e:for(;;){switch(U===p.type?'"':p.value){case".":case"[":s=!0;break;case":":case"(":case"{":case'"':s=null;break;default:break e}u=_e(u,t,e)}if(S.push(u),p.value!==",")break;if(!s)return pe(p);L()}while(!0);if(S.length===1&&s===null)return P(t),v(h.callStatement(S[0]));if(!s)return pe(p);x("=");var I=[];do I.push(O(e));while(E(","));return P(n),v(h.assignmentStatement(S,I))}function j(){se();var e=p.value;return $!==p.type&&te("<name>",p),L(),v(h.identifier(e))}function Ce(e,t){var n=Ge();n.pushScope();var s=[];if(x("("),!E(")"))for(;;){if($===p.type){var u=j();if(i.scope&&me(u),s.push(u),E(","))continue}else ce===p.type?(n.allowVararg=!0,s.push($e(n))):te("<name> or '...'",p);x(")");break}var b=_(n);return n.popScope(),x("end"),i.scope&&K(),t=t||!1,v(h.functionStatement(e,s,t,b))}function Gt(){var e,t,n;for(T&&(n=J()),e=j(),i.scope&&(ge(e,Te(e.name)),G());E(".");)P(n),t=j(),e=v(h.memberExpression(e,".",t));return E(":")&&(P(n),t=j(),e=v(h.memberExpression(e,":",t)),i.scope&&Ae("self")),e}function Ke(e){for(var t=[],n,s;;){if(se(),z===p.type&&E("["))n=O(e),x("]"),x("="),s=O(e),t.push(v(h.tableKey(n,s)));else if($===p.type)ne.value==="="?(n=j(),L(),s=O(e),t.push(v(h.tableKeyString(n,s)))):(s=O(e),t.push(v(h.tableValue(s))));else{if((s=Se(e))==null){M.pop();break}t.push(v(h.tableValue(s)))}if(",;".indexOf(p.value)>=0){L();continue}break}return x("}"),v(h.tableConstructorExpression(t))}function Se(e){var t=Be(0,e);return t}function O(e){var t=Se(e);if(t==null)te("<expression>",p);else return t}function Rt(e){var t=e.charCodeAt(0),n=e.length;if(n===1)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(n===2)switch(t){case 47:return 10;case 46:return 8;case 60:case 62:return e==="<<"||e===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(t===97&&e==="and")return 2;return 0}function Be(e,t){var n=p.value,s,u;if(T&&(u=J()),kt(p)){se(),L();var b=Be(10,t);b==null&&te("<expression>",p),s=v(h.unaryExpression(n,b))}if(s==null&&(s=$e(t),s==null&&(s=Ht(t))),s==null)return null;for(var S;n=p.value,S=z===p.type||B===p.type?Rt(n):0,!(S===0||S<=e);){(n==="^"||n==="..")&&--S,L();var I=Be(S,t);I==null&&te("<expression>",p),T&&M.push(u),s=v(h.binaryExpression(n,s,I))}return s}function _e(e,t,n){var s,u;if(z===p.type)switch(p.value){case"[":return P(t),L(),s=O(n),x("]"),v(h.indexExpression(e,s));case".":return P(t),L(),u=j(),v(h.memberExpression(e,".",u));case":":return P(t),L(),u=j(),e=v(h.memberExpression(e,":",u)),P(t),De(e,n);case"(":case"{":return P(t),De(e,n)}else if(U===p.type)return P(t),De(e,n);return null}function Ht(e){var t,n,s;if(T&&(s=J()),$===p.type)n=p.value,t=j(),i.scope&&ge(t,Te(n));else if(E("("))t=O(e),x(")");else return null;for(;;){var u=_e(t,s,e);if(u===null)break;t=u}return t}function De(e,t){if(z===p.type)switch(p.value){case"(":f.emptyStatement||p.line!==V.line&&w(null,y.ambiguousSyntax,p.value),L();var n=[],s=Se(t);for(s!=null&&n.push(s);E(",");)s=O(t),n.push(s);return x(")"),v(h.callExpression(e,n));case"{":se(),L();var u=Ke(t);return v(h.tableCallExpression(e,u))}else if(U===p.type)return v(h.stringCallExpression(e,$e(t)));te("function arguments",p)}function $e(e){var t=U|ee|oe|le|ce,n=p.value,s=p.type,u;if(T&&(u=J()),s===ce&&!e.allowVararg&&w(p,y.cannotUseVararg,p.value),s&t){P(u);var b=r.slice(p.range[0],p.range[1]);return L(),v(h.literal(s,n,b))}else{if(B===s&&n==="function")return P(u),L(),i.scope&&G(),Ce(null);if(E("{"))return P(u),Ke(e)}}o.parse=Kt;var We={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Kt(e,t){if(typeof t>"u"&&typeof e=="object"&&(t=e,e=void 0),t||(t={}),r=e||"",i=Fe({},N,t),a=0,D=1,q=0,d=r.length,ae=[[]],ie=0,ye=[],M=[],!Object.prototype.hasOwnProperty.call(We,i.luaVersion))throw new Error(ue("Lua version '%1' not supported",i.luaVersion));if(f=Fe({},We[i.luaVersion]),i.extendedIdentifiers!==void 0&&(f.extendedIdentifiers=!!i.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(R,i.encodingMode))throw new Error(ue("Encoding mode '%1' not supported",i.encodingMode));return m=R[i.encodingMode],i.comments&&(Oe=[]),i.wait?o:Je()}o.write=ze;function ze(e){return r+=String(e),d=r.length,o}o.end=Je;function Je(e){typeof e<"u"&&ze(e),r&&r.substr(0,2)==="#!"&&(r=r.replace(/^.*/,function(n){return n.replace(/./g," ")})),d=r.length,T=i.locations||i.ranges,ne=Ie();var t=Tt();if(i.comments&&(t.comments=Oe),i.scope&&(t.globals=ye),M.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return t}})})(he,he.exports)),he.exports}Wt();async function et(c,l=""){try{const o=await fetch(`${l}/api/fandom-image?filename=${encodeURIComponent(c)}`);if(!o.ok)throw new Error(`Failed to fetch image data: ${o.status}`);const r=await o.json();if(r.error)throw new Error(r.error);return r.url}catch(o){throw console.error(`Error fetching Fandom image URL for ${c}:`,o),o}}async function tt(c,l="700x700"){try{const o=await fetch(`/api/roblox-thumbnail?assetid=${encodeURIComponent(c)}&size=${encodeURIComponent(l)}`);if(!o.ok)throw new Error(`Failed to fetch Thumbnail data: ${o.status}`);const r=await o.json();if(r.error)throw new Error(r.error);return r.imageUrl}catch(o){throw console.error(`Error fetching Roblox thumbnail URL for ${c}:`,o),o}}const Ue="/assets/Unknown%20Flag-Csi4Lygo.png",zt="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'%20standalone='no'?%3e%3c!--%20Uploaded%20to:%20SVG%20Repo,%20www.svgrepo.com,%20Generator:%20SVG%20Repo%20Mixer%20Tools%20--%3e%3csvg%20fill='%23000000'%20width='733.33301'%20height='733.33301'%20viewBox='0%200%2021.99999%2021.99999'%20version='1.1'%20id='svg1'%20sodipodi:docname='trash-can.svg'%20inkscape:version='1.3%20(0e150ed6c4,%202023-07-21)'%20xmlns:inkscape='http://www.inkscape.org/namespaces/inkscape'%20xmlns:sodipodi='http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd'%20xmlns='http://www.w3.org/2000/svg'%20xmlns:svg='http://www.w3.org/2000/svg'%3e%3cdefs%20id='defs1'%20/%3e%3csodipodi:namedview%20id='namedview1'%20pagecolor='%23505050'%20bordercolor='%23ffffff'%20borderopacity='1'%20inkscape:showpageshadow='0'%20inkscape:pageopacity='0'%20inkscape:pagecheckerboard='1'%20inkscape:deskcolor='%23505050'%20inkscape:zoom='0.97125'%20inkscape:cx='363.96396'%20inkscape:cy='356.75676'%20inkscape:window-width='1920'%20inkscape:window-height='991'%20inkscape:window-x='-9'%20inkscape:window-y='-9'%20inkscape:window-maximized='1'%20inkscape:current-layer='svg1'%20/%3e%3cpath%20fill-rule='evenodd'%20d='m%2010.999995,12.585781%202.292893,-2.292893%201.414214,1.414214%20-2.292893,2.292893%202.292893,2.292893%20-1.414214,1.414214%20L%2010.999995,15.414209%208.7071018,17.707102%207.2928882,16.292888%209.585781,13.999995%207.2928882,11.707102%208.7071018,10.292888%20Z%20m%20-5,-9.585786%20v%20-1%20c%200,-1.1045695%200.8954305,-2%202,-2%20h%206%20c%201.104569,0%202,0.8954305%202,2%20v%201%20h%203%20c%201.104569,0%202,0.8954305%202,2%20v%202%20c%200,1.1045695%20-0.895431,2%20-2,2%20h%20-0.08013%20l%20-0.91987,11%20c%200,1.104569%20-0.895431,2%20-2,2%20h%20-10%20c%20-1.1045695,0%20-2,-0.895431%20-1.9965458,-1.916955%20L%203.0798621,8.999995%20H%202.999995%20c%20-1.1045695,0%20-2,-0.8954305%20-2,-2%20v%20-2%20c%200,-1.1045695%200.8954305,-2%202,-2%20z%20m%200,2%20h%20-3%20v%202%20h%2016%20v%20-2%20h%20-3%20z%20m%20-0.9135111,4%200.9135111,11%20h%2010%20l%200.0035,-0.08305%200.9097,-10.91695%20z%20m%208.9135111,-6%20v%20-1%20h%20-6%20v%201%20z'%20id='path1'%20/%3e%3c/svg%3e";let W,Jt,je,nt,xe=null;const k={NationName:"",Flags:[]},Qe=36,Xt=3;async function Zt(){return xe??=(async()=>{const c=await fetch("/api/fandom-data");if(!c.ok)throw new Error(`HTTP ${c.status}`);({Lawnames:W,Flagdata:Jt,Nationdata:je,Tagdata:nt}=await c.json()),await at()})(),xe}async function rt(){!W&&xe&&await xe}function Qt(c,l){for(const o of document.getElementsByClassName("tabcontent"))o.classList.remove("tabcontent-visible"),o.classList.add("tabcontent-hidden");for(const o of document.getElementsByClassName("tablinks"))o.classList.remove("active");document.getElementById(l).classList.replace("tabcontent-hidden","tabcontent-visible"),c.currentTarget.classList.add("active")}async function at(){await rt();const c=r=>r.includes("scale-to-width-down")?r.replace(/scale-to-width-down\/\d+/,`scale-to-width-down/${Qe}`):r.replace(/\/revision\/latest/,`/revision/latest/scale-to-width-down/${Qe}`),l=(r,i)=>{const d=document.createElement("li"),f=document.createElement("button"),m=Object.assign(document.createElement("span"),{className:"flag-image"}),N=Object.assign(document.createElement("img"),{src:i});m.appendChild(N);const g=Object.assign(document.createElement("span"),{textContent:r});return f.append(m,g),f.addEventListener("click",()=>an(r)),d.appendChild(f),d},o=r=>r==="Nations"?Object.entries(je.nationdata).filter(([,i])=>i.nation===!0).map(([i])=>i).sort():r==="Releasables"?Object.entries(je.nationdata).filter(([,i])=>i.nation===!1).map(([i])=>i).sort():r==="Formables"?Object.values(nt.Tags).filter(i=>i.FormableName&&!i.Removed).map(i=>i.FormableName).sort():[];for(const r of document.getElementsByClassName("nations-list")){const i=o(r.parentElement.id),d=await Promise.all(i.map(f=>et(`${f}_Flag.png`)));r.innerHTML="",i.forEach((f,m)=>{r.appendChild(l(f,c(d[m])))})}}function Yt(){const c=document.getElementById("nations-search-filter").value.toUpperCase();for(const l of document.getElementsByClassName("nations-list"))for(const o of l.getElementsByTagName("li")){const i=(o.getElementsByTagName("span")[1]?.textContent??"").toUpperCase();o.style.display=i.includes(c)?"":"none"}}async function it(c){await rt();const l=c?.querySelector(".laws-selection");if(!l){console.error("'.laws-selection' not found in flag div");return}if(!W?.lawNames){console.error("Lawnames not loaded");return}l.innerHTML="";const o=Object.entries(W.lawNames).sort(([,r],[,i])=>r.Name.localeCompare(i.Name));for(const[,r]of o){const i=Object.assign(document.createElement("button"),{className:"btn",textContent:r.Name});l.appendChild(i)}}function st(c){return Object.keys(W.lawNames).find(l=>W.lawNames[l].Name===c)??null}function ot(c){return W.lawNames[c]?.Name}function en(c,l){return W.lawNames[c]?.Types[l]??"Law Not Found"}function lt(c,l){for(const[,o]of Object.entries(W.lawNames))if(o.Name===c){const r=Object.entries(o.Types).find(([,i])=>i===l);if(r)return r[0]}return console.warn("Law Not Found for",c,l),"Law Not Found"}function ct(c={}){const l={FlagName:c.FlagName??"",FlagID:c.FlagID??"",Description:c.Description??"",Ideologies:c.Ideologies??[],Laws:c.Laws??{},NOTLaws:c.NOTLaws??{}};return k.Flags.push(l),l}function tn(c){k.Flags.splice(c,1)}function nn(c,l){const o=document.createElement("div");o.classList.add("flag"),o.dataset.flagIndex=l,o.innerHTML=`
        <button class="collapse-flag-overview-button">
            <div class="flag-overview">
                <div class="flag-overview-left">
                    <img class="dyn-flag" src="${Ue}">
                    <p id="flag-name">${c.FlagName||"Flag Name"}</p>
                </div>
                <div class="flag-overview-right">
                    <div><span class="flag-overview-title">Flag ID: </span><span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Ideologies: </span><span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Laws: </span><span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title ron-red">NOT Laws: </span><span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Description: </span><span class="flag-overview-content"></span></div>
                </div>
            </div>
        </button>
        <div class="flag-contents">
            <button class="delete-flag-button"><img src="${zt}" alt="Delete Flag">Delete Flag</button>
            <div class="flag-label"><span class="flag-title">Name: </span><input class="flag-input flag-name-input" value="${c.FlagName}"></div>
            <div class="flag-label"><span class="flag-title">Image ID: </span><input class="flag-input flag-image-input" value="${c.FlagID}"></div>
            <div class="flag-label"><span class="flag-title">Description/Sources: </span><input class="flag-input flag-description-input" value="${c.Description}"></div>
            <div class="ideologies">
                <ul>
                    <li>
                        <button type="button" class="btn">Non-Aligned</button>
                        <ul>
                            <li>
                                <button style="color:#F3B6B6" type="button" class="btn">Socialism</button>
                                <ul><li><button style="color:#F37B7B" type="button" class="btn">Communism</button></li></ul>
                            </li>
                            <li>
                                <button style="color:#B5B6F3" type="button" class="btn">Liberalism</button>
                                <ul><li><button style="color:#7B7BF3" type="button" class="btn">Democracy</button></li></ul>
                            </li>
                            <li>
                                <button style="color:#B8B8B9" type="button" class="btn">Nationalism</button>
                                <ul><li><button style="color:#7B7B7B" type="button" class="btn">Fascism</button></li></ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="laws">
                <div class="laws-selection">
                    <img src="https://media.tenor.com/3xTqDrUgvvIAAAAi/error-404.gif" alt="Loading..." class="loading-gif">
                </div>
                <div class="laws-name"></div>
                <div class="laws-level"></div>
            </div>
        </div>
    `,o.querySelector(".collapse-flag-overview-button").addEventListener("click",()=>{o.querySelector(".flag-contents").classList.toggle("is-hidden")}),o.querySelector(".delete-flag-button").addEventListener("click",()=>{tn(l),ve()});const r=(i,d)=>{o.querySelector(i).addEventListener("input",f=>{k.Flags[l][d]=f.target.value,qe(o,l)})};return r(".flag-name-input","FlagName"),r(".flag-image-input","FlagID"),r(".flag-description-input","Description"),o.querySelector(".ideologies").addEventListener("click",i=>{if(i.target.tagName!=="BUTTON")return;const d=i.target.textContent,f=k.Flags[l].Ideologies,m=f.indexOf(d);m!==-1?f.splice(m,1):f.push(d),ut(o,k.Flags[l],l)}),o.querySelector(".laws-selection").addEventListener("click",i=>{i.target.tagName==="BUTTON"&&rn(o,i.target.textContent)}),it(o),o}function rn(c,l){const o=st(l);if(!o)return;c.querySelector(".laws-name").textContent=l;const r=c.querySelector(".laws-level"),i=r.cloneNode(!1);r.replaceWith(i);const d=parseInt(c.dataset.flagIndex,10);for(const f of Object.values(W.lawNames[o].Types)){const m=Object.assign(document.createElement("button"),{className:"btn",textContent:f});i.appendChild(m)}Ye(i,d,o),i.addEventListener("click",f=>{if(f.target.tagName!=="BUTTON")return;const m=lt(l,f.target.textContent),N=k.Flags[d];N.Laws[o]??=[],N.NOTLaws[o]??=[];const g=N.Laws[o],C=N.NOTLaws[o];g.includes(m)?(g.splice(g.indexOf(m),1),C.push(m)):C.includes(m)?C.splice(C.indexOf(m),1):g.push(m),g.length||delete N.Laws[o],C.length||delete N.NOTLaws[o],Ye(i,d,o),ft(c,N),qe(c,d)})}function Ye(c,l,o){const r=k.Flags[l],i=r.Laws[o]??[],d=r.NOTLaws[o]??[],f=ot(o);for(const m of c.querySelectorAll("button")){const N=lt(f,m.textContent);m.classList.remove("btn-allowed","btn-not-allowed"),i.length&&i.includes(N)?m.classList.add("btn-allowed"):(i.length&&!i.includes(N)||d.includes(N))&&m.classList.add("btn-not-allowed")}}function ut(c,l,o){c.dataset.flagIndex=o;const r=(d,f)=>{const m=c.querySelector(d);m&&m.value!==f&&(m.value=f)};r(".flag-name-input",l.FlagName),r(".flag-image-input",l.FlagID),r(".flag-description-input",l.Description);const i=l.Ideologies.length>0;for(const d of c.querySelectorAll(".ideologies button")){const f=l.Ideologies.includes(d.textContent);d.classList.remove("btn-allowed","btn-not-allowed"),i&&d.classList.add(f?"btn-allowed":"btn-not-allowed")}ft(c,l),qe(c,o)}function ft(c,l){for(const o of c.querySelectorAll(".laws-selection button")){const r=st(o.textContent);if(!r)continue;const i=(l.Laws[r]?.length??0)>0,d=(l.NOTLaws[r]?.length??0)>0;o.classList.remove("btn-allowed","btn-not-allowed","btn-half-allowed"),i&&d?o.classList.add("btn-half-allowed"):i?o.classList.add("btn-allowed"):d&&o.classList.add("btn-not-allowed")}}function qe(c,l){const o=k.Flags[l],r=c.querySelector(".flag-overview-left #flag-name");r&&(r.textContent=o.FlagName||"Flag Name");const i=c.querySelector(".flag-overview-left .dyn-flag");i&&o.FlagID&&tt(o.FlagID,"700x700").then(m=>{i.src=m}).catch(()=>{i.src=Ue});const d=(m,N="",g)=>{const C=Object.entries(m).filter(([,R])=>R?.length).map(([R,H])=>{const U=ot(R),B=H.map($=>en(R,$));return`${U}: ${B.join(", ")}`}),Y=C.length?"<br>"+C.join("<br>"):"None";return`<span class="flag-overview-title ${N}">${g}</span>${Y}<span class="flag-overview-content"></span>`},f=c.querySelectorAll(".flag-overview-right > div");f.length>=5&&(f[0].innerHTML=`<span class="flag-overview-title">Flag ID: </span>${o.FlagID}<span class="flag-overview-content"></span>`,f[1].innerHTML=`<span class="flag-overview-title">Ideologies: </span>${o.Ideologies.join(", ")}<span class="flag-overview-content"></span>`,f[2].innerHTML=d(o.Laws,"","Laws: "),f[3].innerHTML=d(o.NOTLaws,"ron-red","NOT Laws: "),f[4].innerHTML=`<span class="flag-overview-title">Description: </span>${o.Description}<span class="flag-overview-content"></span>`),pt()}function an(c){k.NationName=c,ve()}function ve(){const c=document.querySelector("#nation-name"),l=document.querySelector("#nation-flag");c&&(c.value=k.NationName,k.NationName&&l&&et(`${k.NationName}_Flag.png`).then(d=>{l.src=d}).catch(()=>{l.src=Ue}));const o=document.querySelector(".main-content"),r=document.querySelector(".new-flag-button"),i=[...document.querySelectorAll(".flag")];i.slice(k.Flags.length).forEach(d=>d.remove()),k.Flags.forEach((d,f)=>{i[f]?ut(i[f],d,f):o.insertBefore(nn(d,f),r)}),pt()}async function pt(){const c=document.querySelector("#output-text");if(!c)return;const l="&nbsp;&nbsp;&nbsp;&nbsp;",o=g=>{const C=g.FlagID?`rbxassetid://${g.FlagID}`:"",Y=g.FlagName??"",R=g.Ideologies?.length>0,H=Object.keys(g.Laws??{}).length>0,U=Object.keys(g.NOTLaws??{}).length>0;if(!R&&!H&&!U)return`${l}["${Y}"] = {ID = "${C}",},`;const B=[`${l}["${Y}"] = {ID = "${C}",`,`${l}${l}Requirements = {`];if(R){const $=g.Ideologies.map(ee=>`"${ee}"`).join(", ");B.push(`${l}${l}${l}${l}["Ideology"] = '[${$}]',`)}return H&&B.push(`${l}${l}${l}${l}["Political_Law"] = '${JSON.stringify(g.Laws)}',`),U&&B.push(`${l}${l}${l}${l}["NOT_Political_Law"] = '${JSON.stringify(g.NOTLaws)}',`),B.push(`${l}${l}},`,`${l}},`),B.join("<br>")},r=k.Flags.filter(g=>g.FlagName&&g.FlagID),i=await Promise.all(r.map(g=>tt(g.FlagID,"700x700").catch(()=>null))),d=r.map((g,C)=>i[C]?`[${g.FlagName}](${i[C]})`:null).filter(Boolean),f=on(d,Xt).map(g=>g.join(", ")).join("<br>"),m=k.Flags.filter(g=>g.Description).map(g=>`**${g.FlagName}:** ${g.Description}`).join("<br>"),N=k.Flags.filter(g=>g.FlagName&&g.FlagID).map(o).join("<br>");c.innerHTML=`
    \`\`\`lua<br>
    ["${k.NationName}"] = {<br>
    ${N}<br>
    },<br>
    \`\`\`<br>
    --[[<br>
    # __Description/Sources__<br>
    ${m}<br>
    # __Images__<br>
    ${f}<br>
    > -# *Made using [Dyn Flagger](https://dyn-flagger.pages.dev/ )*<br>
    ]]`.trim()}function sn(){const c=document.getElementById("output-text"),l=document.getElementById("copy-output-btn");navigator.clipboard.writeText(c.innerText).then(()=>{l.textContent="Copied!",l.classList.add("output-btn-copied"),setTimeout(()=>{l.textContent="Copy to clipboard",l.classList.remove("output-btn-copied")},1e3)})}function on(c,l){return Array.from({length:Math.ceil(c.length/l)},(o,r)=>c.slice(r*l,r*l+l))}document.addEventListener("DOMContentLoaded",()=>{document.querySelector(".new-flag-button button")?.addEventListener("click",()=>{ct(),ve()}),document.querySelector("#nation-name")?.addEventListener("input",c=>{k.NationName=c.target.value,ve()})});Zt().catch(console.error);ct();ve();Object.assign(window,{switchTab:Qt,generateLawsList:it,generateNationsList:at,nationsSearchFilter:Yt,copyOutput:sn});
