(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const f of i)if(f.type==="childList")for(const u of f.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&a(u)}).observe(document,{childList:!0,subtree:!0});function l(i){const f={};return i.integrity&&(f.integrity=i.integrity),i.referrerPolicy&&(f.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?f.credentials="include":i.crossOrigin==="anonymous"?f.credentials="omit":f.credentials="same-origin",f}function a(i){if(i.ep)return;i.ep=!0;const f=l(i);fetch(i.href,f)}})();var Qe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},be={exports:{}},Wt=be.exports,Ye;function Jt(){return Ye||(Ye=1,(function(o,c){(function(l,a,i){var f=c&&!c.nodeType&&c,u=o&&!o.nodeType&&o,m=f&&u&&typeof Qe=="object"&&Qe,w=u&&u.exports===f&&f;m&&(m.global===m||m.window===m||m.self===m)&&(l=m),i(f&&u?w?u.exports:f:l[a]={})})(Wt,"luaparse",function(l){l.version="0.3.1";var a,i,f,u,m,w=l.defaultOptions={wait:!1,comments:!0,scope:!1,locations:!1,ranges:!1,onCreateNode:null,onCreateScope:null,onDestroyScope:null,onLocalDeclaration:null,luaVersion:"5.1",encodingMode:"none"};function h(e,t){return t=t||0,e<128?String.fromCharCode(e):e<2048?String.fromCharCode(t|192|e>>6,t|128|e&63):e<65536?String.fromCharCode(t|224|e>>12,t|128|e>>6&63,t|128|e&63):e<1114112?String.fromCharCode(t|240|e>>18,t|128|e>>12&63,t|128|e>>6&63,t|128|e&63):null}function g(e,t){for(var n=e.toString(16);n.length<t;)n="0"+n;return n}function v(e){return function(t){var n=e.exec(t);if(!n)return t;N(null,x.invalidCodeUnit,g(n[0].charCodeAt(0),4).toUpperCase())}}var I={"pseudo-latin1":{fixup:v(/[^\x00-\xff]/),encodeByte:function(e){return e===null?"":String.fromCharCode(e)},encodeUTF8:function(e){return h(e)}},"x-user-defined":{fixup:v(/[^\x00-\x7f\uf780-\uf7ff]/),encodeByte:function(e){return e===null?"":e>=128?String.fromCharCode(e|63232):String.fromCharCode(e)},encodeUTF8:function(e){return h(e,63232)}},none:{discardStrings:!0,fixup:function(e){return e},encodeByte:function(e){return""},encodeUTF8:function(e){return""}}},k=1,$=2,_=4,W=8,M=16,U=32,H=64,ue=128,fe=256;l.tokenTypes={EOF:k,StringLiteral:$,Keyword:_,Identifier:W,NumericLiteral:M,Punctuator:U,BooleanLiteral:H,NilLiteral:ue,VarargLiteral:fe};var x=l.errors={unexpected:"unexpected %1 '%2' near '%3'",unexpectedEOF:"unexpected symbol near '<eof>'",expected:"'%1' expected near '%2'",expectedToken:"%1 expected near '%2'",unfinishedString:"unfinished string near '%1'",malformedNumber:"malformed number near '%1'",decimalEscapeTooLarge:"decimal escape too large near '%1'",invalidEscape:"invalid escape sequence near '%1'",hexadecimalDigitExpected:"hexadecimal digit expected near '%1'",braceExpected:"missing '%1' near '%2'",tooLargeCodepoint:"UTF-8 value too large near '%1'",unfinishedLongString:"unfinished long string (starting at line %1) near '%2'",unfinishedLongComment:"unfinished long comment (starting at line %1) near '%2'",ambiguousSyntax:"ambiguous syntax (function call x new statement) near '%1'",noLoopToBreak:"no loop to break near '%1'",labelAlreadyDefined:"label '%1' already defined on line %2",labelNotVisible:"no visible label '%1' for <goto>",gotoJumpInLocalScope:"<goto %1> jumps into the scope of local '%2'",cannotUseVararg:"cannot use '...' outside a vararg function near '%1'",invalidCodeUnit:"code unit U+%1 is not allowed in the current encoding mode"},b=l.ast={labelStatement:function(e){return{type:"LabelStatement",label:e}},breakStatement:function(){return{type:"BreakStatement"}},gotoStatement:function(e){return{type:"GotoStatement",label:e}},returnStatement:function(e){return{type:"ReturnStatement",arguments:e}},ifStatement:function(e){return{type:"IfStatement",clauses:e}},ifClause:function(e,t){return{type:"IfClause",condition:e,body:t}},elseifClause:function(e,t){return{type:"ElseifClause",condition:e,body:t}},elseClause:function(e){return{type:"ElseClause",body:e}},whileStatement:function(e,t){return{type:"WhileStatement",condition:e,body:t}},doStatement:function(e){return{type:"DoStatement",body:e}},repeatStatement:function(e,t){return{type:"RepeatStatement",condition:e,body:t}},localStatement:function(e,t){return{type:"LocalStatement",variables:e,init:t}},assignmentStatement:function(e,t){return{type:"AssignmentStatement",variables:e,init:t}},callStatement:function(e){return{type:"CallStatement",expression:e}},functionStatement:function(e,t,n,s){return{type:"FunctionDeclaration",identifier:e,isLocal:n,parameters:t,body:s}},forNumericStatement:function(e,t,n,s,p){return{type:"ForNumericStatement",variable:e,start:t,end:n,step:s,body:p}},forGenericStatement:function(e,t,n){return{type:"ForGenericStatement",variables:e,iterators:t,body:n}},chunk:function(e){return{type:"Chunk",body:e}},identifier:function(e){return{type:"Identifier",name:e}},literal:function(e,t,n){return e=e===$?"StringLiteral":e===M?"NumericLiteral":e===H?"BooleanLiteral":e===ue?"NilLiteral":"VarargLiteral",{type:e,value:t,raw:n}},tableKey:function(e,t){return{type:"TableKey",key:e,value:t}},tableKeyString:function(e,t){return{type:"TableKeyString",key:e,value:t}},tableValue:function(e){return{type:"TableValue",value:e}},tableConstructorExpression:function(e){return{type:"TableConstructorExpression",fields:e}},binaryExpression:function(e,t,n){var s=e==="and"||e==="or"?"LogicalExpression":"BinaryExpression";return{type:s,operator:e,left:t,right:n}},unaryExpression:function(e,t){return{type:"UnaryExpression",operator:e,argument:t}},memberExpression:function(e,t,n){return{type:"MemberExpression",indexer:t,identifier:n,base:e}},indexExpression:function(e,t){return{type:"IndexExpression",base:e,index:t}},callExpression:function(e,t){return{type:"CallExpression",base:e,arguments:t}},tableCallExpression:function(e,t){return{type:"TableCallExpression",base:e,arguments:t}},stringCallExpression:function(e,t){return{type:"StringCallExpression",base:e,argument:t}},comment:function(e,t){return{type:"Comment",value:e,raw:t}}};function L(e){if(q){var t=G.pop();t.complete(),t.bless(e)}return i.onCreateNode&&i.onCreateNode(e),e}var Fe=Array.prototype.slice,Ie=function(e,t){for(var n=0,s=e.length;n<s;++n)if(e[n]===t)return n;return-1};Array.prototype.indexOf&&(Ie=function(e,t){return e.indexOf(t)});function dt(e,t,n){for(var s=0,p=e.length;s<p;++s)if(e[s][t]===n)return s;return-1}function pe(e){var t=Fe.call(arguments,1);return e=e.replace(/%(\d)/g,function(n,s){return""+t[s-1]||""}),e}var Te=function(e){for(var t=Fe.call(arguments,1),n,s,p=0,S=t.length;p<S;++p){n=t[p];for(s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e};Object.assign&&(Te=Object.assign),l.SyntaxError=SyntaxError;function Ve(e){return Object.create?Object.create(e,{line:{writable:!0,value:e.line},index:{writable:!0,value:e.index},column:{writable:!0,value:e.column}}):e}function N(e){var t=pe.apply(null,Fe.call(arguments,1)),n,s;throw e===null||typeof e.line>"u"?(s=r-R+1,n=Ve(new SyntaxError(pe("[%1:%2] %3",P,s,t))),n.index=r,n.line=P,n.column=s):(s=e.range[0]-e.lineStart,n=Ve(new SyntaxError(pe("[%1:%2] %3",e.line,s,t))),n.line=e.line,n.index=e.range[0],n.column=s),n}function de(e){var t=a.slice(e.range[0],e.range[1]);return t||e.value}function ne(e,t){N(t,x.expectedToken,e,de(t))}function ge(e){var t=de(re);if(typeof e.type<"u"){var n;switch(e.type){case $:n="string";break;case _:n="keyword";break;case W:n="identifier";break;case M:n="number";break;case U:n="symbol";break;case H:n="boolean";break;case ue:return N(e,x.unexpected,"symbol","nil",t);case k:return N(e,x.unexpectedEOF)}return N(e,x.unexpected,n,de(e),t)}return N(e,x.unexpected,"symbol",e,t)}var r,d,J,re,Oe,A,P,R;l.lex=Ae;function Ae(){for(ke();a.charCodeAt(r)===45&&a.charCodeAt(r+1)===45;)Nt(),ke();if(r>=f)return{type:k,value:"<eof>",line:P,lineStart:R,range:[r,r]};var e=a.charCodeAt(r),t=a.charCodeAt(r+1);if(A=r,Ft(e))return gt();switch(e){case 39:case 34:return ht();case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return Me();case 46:return ee(t)?Me():t===46?a.charCodeAt(r+2)===46?mt():D(".."):D(".");case 61:return D(t===61?"==":"=");case 62:return u.bitwiseOperators&&t===62?D(">>"):D(t===61?">=":">");case 60:return u.bitwiseOperators&&t===60?D("<<"):D(t===61?"<=":"<");case 126:if(t===61)return D("~=");if(!u.bitwiseOperators)break;return D("~");case 58:return u.labels&&t===58?D("::"):D(":");case 91:return t===91||t===61?vt():D("[");case 47:return u.integerDivision&&t===47?D("//"):D("/");case 38:case 124:if(!u.bitwiseOperators)break;case 42:case 94:case 37:case 44:case 123:case 125:case 93:case 40:case 41:case 59:case 35:case 45:case 43:return D(a.charAt(r))}return ge(a.charAt(r))}function Le(){var e=a.charCodeAt(r),t=a.charCodeAt(r+1);return me(e)?(e===10&&t===13&&++r,e===13&&t===10&&++r,++P,R=++r,!0):!1}function ke(){for(;r<f;){var e=a.charCodeAt(r);if(Et(e))++r;else if(!Le())break}}function gt(){for(var e,t;It(a.charCodeAt(++r)););return e=m.fixup(a.slice(A,r)),Tt(e)?t=_:e==="true"||e==="false"?(t=H,e=e==="true"):e==="nil"?(t=ue,e=null):t=W,{type:t,value:e,line:P,lineStart:R,range:[A,r]}}function D(e){return r+=e.length,{type:U,value:e,line:P,lineStart:R,range:[A,r]}}function mt(){return r+=3,{type:fe,value:"...",line:P,lineStart:R,range:[A,r]}}function ht(){for(var e=a.charCodeAt(r++),t=P,n=R,s=r,p=m.discardStrings?null:"",S;S=a.charCodeAt(r++),e!==S;)if((r>f||me(S))&&(p+=a.slice(s,r-1),N(null,x.unfinishedString,a.slice(A,r-1))),S===92){if(!m.discardStrings){var E=a.slice(s,r-1);p+=m.fixup(E)}var B=xt();m.discardStrings||(p+=B),s=r}return m.discardStrings||(p+=m.encodeByte(null),p+=m.fixup(a.slice(s,r-1))),{type:$,value:p,line:t,lineStart:n,lastLine:P,lastLineStart:R,range:[A,r]}}function vt(){var e=P,t=R,n=Re(!1);return n===!1&&N(d,x.expected,"[",de(d)),{type:$,value:m.discardStrings?null:m.fixup(n),line:e,lineStart:t,lastLine:P,lastLineStart:R,range:[A,r]}}function Me(){var e=a.charAt(r),t=a.charAt(r+1),n=e==="0"&&"xX".indexOf(t||null)>=0?wt():Lt(),s=bt(),p=yt();return p&&(s||n.hasFractionPart)&&N(null,x.malformedNumber,a.slice(A,r)),{type:M,value:n.value,line:P,lineStart:R,range:[A,r]}}function bt(){if(u.imaginaryNumbers)return"iI".indexOf(a.charAt(r)||null)>=0?(++r,!0):!1}function yt(){if(u.integerSuffixes){if("uU".indexOf(a.charAt(r)||null)>=0)if(++r,"lL".indexOf(a.charAt(r)||null)>=0){if(++r,"lL".indexOf(a.charAt(r)||null)>=0)return++r,"ULL";N(null,x.malformedNumber,a.slice(A,r))}else N(null,x.malformedNumber,a.slice(A,r));else if("lL".indexOf(a.charAt(r)||null)>=0){if(++r,"lL".indexOf(a.charAt(r)||null)>=0)return++r,"LL";N(null,x.malformedNumber,a.slice(A,r))}}}function wt(){var e=0,t=1,n=1,s,p,S,E;for(E=r+=2,ae(a.charCodeAt(r))||N(null,x.malformedNumber,a.slice(A,r));ae(a.charCodeAt(r));)++r;s=parseInt(a.slice(E,r),16);var B=!1;if(a.charAt(r)==="."){for(B=!0,p=++r;ae(a.charCodeAt(r));)++r;e=a.slice(p,r),e=p===r?0:parseInt(e,16)/Math.pow(16,r-p)}var Ee=!1;if("pP".indexOf(a.charAt(r)||null)>=0){for(Ee=!0,++r,"+-".indexOf(a.charAt(r)||null)>=0&&(n=a.charAt(r++)==="+"?1:-1),S=r,ee(a.charCodeAt(r))||N(null,x.malformedNumber,a.slice(A,r));ee(a.charCodeAt(r));)++r;t=a.slice(S,r),t=Math.pow(2,t*n)}return{value:(s+e)*t,hasFractionPart:B||Ee}}function Lt(){for(;ee(a.charCodeAt(r));)++r;var e=!1;if(a.charAt(r)===".")for(e=!0,++r;ee(a.charCodeAt(r));)++r;var t=!1;if("eE".indexOf(a.charAt(r)||null)>=0)for(t=!0,++r,"+-".indexOf(a.charAt(r)||null)>=0&&++r,ee(a.charCodeAt(r))||N(null,x.malformedNumber,a.slice(A,r));ee(a.charCodeAt(r));)++r;return{value:parseFloat(a.slice(A,r)),hasFractionPart:e||t}}function St(){var e=r++;for(a.charAt(r++)!=="{"&&N(null,x.braceExpected,"{","\\"+a.slice(e,r)),ae(a.charCodeAt(r))||N(null,x.hexadecimalDigitExpected,"\\"+a.slice(e,r));a.charCodeAt(r)===48;)++r;for(var t=r;ae(a.charCodeAt(r));)++r,r-t>6&&N(null,x.tooLargeCodepoint,"\\"+a.slice(e,r));var n=a.charAt(r++);n!=="}"&&(n==='"'||n==="'"?N(null,x.braceExpected,"}","\\"+a.slice(e,r--)):N(null,x.hexadecimalDigitExpected,"\\"+a.slice(e,r)));var s=parseInt(a.slice(t,r-1)||"0",16),p="\\"+a.slice(e,r);return s>1114111&&N(null,x.tooLargeCodepoint,p),m.encodeUTF8(s,p)}function xt(){var e=r;switch(a.charAt(r)){case"a":return++r,"\x07";case"n":return++r,`
`;case"r":return++r,"\r";case"t":return++r,"	";case"v":return++r,"\v";case"b":return++r,"\b";case"f":return++r,"\f";case"\r":case`
`:return Le(),`
`;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":for(;ee(a.charCodeAt(r))&&r-e<3;)++r;var t=a.slice(e,r),n=parseInt(t,10);return n>255&&N(null,x.decimalEscapeTooLarge,"\\"+n),m.encodeByte(n,"\\"+t);case"z":if(u.skipWhitespaceEscape)return++r,ke(),"";break;case"x":if(u.hexEscapes){if(ae(a.charCodeAt(r+1))&&ae(a.charCodeAt(r+2)))return r+=3,m.encodeByte(parseInt(a.slice(e+1,r),16),"\\"+a.slice(e,r));N(null,x.hexadecimalDigitExpected,"\\"+a.slice(e,r+2))}break;case"u":if(u.unicodeEscapes)return St();break;case"\\":case'"':case"'":return a.charAt(r++)}return u.strictEscapes&&N(null,x.invalidEscape,"\\"+a.slice(e,r+1)),a.charAt(r++)}function Nt(){A=r,r+=2;var e=a.charAt(r),t="",n=!1,s=r,p=R,S=P;if(e==="["&&(t=Re(!0),t===!1?t=e:n=!0),!n){for(;r<f&&!me(a.charCodeAt(r));)++r;i.comments&&(t=a.slice(s,r))}if(i.comments){var E=b.comment(t,a.slice(A,r));i.locations&&(E.loc={start:{line:S,column:A-p},end:{line:P,column:r-R}}),i.ranges&&(E.range=[A,r]),i.onCreateNode&&i.onCreateNode(E),Oe.push(E)}}function Re(e){var t=0,n="",s=!1,p,S,E=P;for(++r;a.charAt(r+t)==="=";)++t;if(a.charAt(r+t)!=="[")return!1;for(r+=t+1,me(a.charCodeAt(r))&&Le(),S=r;r<f;){for(;me(a.charCodeAt(r));)Le();if(p=a.charAt(r++),p==="]"){s=!0;for(var B=0;B<t;++B)a.charAt(r+B)!=="="&&(s=!1);a.charAt(r+t)!=="]"&&(s=!1)}if(s)return n+=a.slice(S,r-1),r+=t+1,n}N(null,e?x.unfinishedLongComment:x.unfinishedLongString,E,"<eof>")}function F(){J=d,d=re,re=Ae()}function O(e){return e===d.value?(F(),!0):!1}function T(e){e===d.value?F():N(d,x.expected,e,de(d))}function Et(e){return e===9||e===32||e===11||e===12}function me(e){return e===10||e===13}function ee(e){return e>=48&&e<=57}function ae(e){return e>=48&&e<=57||e>=97&&e<=102||e>=65&&e<=70}function Ft(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||u.extendedIdentifiers&&e>=128)}function It(e){return!!(e>=65&&e<=90||e>=97&&e<=122||e===95||e>=48&&e<=57||u.extendedIdentifiers&&e>=128)}function Tt(e){switch(e.length){case 2:return e==="do"||e==="if"||e==="in"||e==="or";case 3:return e==="and"||e==="end"||e==="for"||e==="not";case 4:return e==="else"||e==="then"?!0:u.labels&&!u.contextualGoto?e==="goto":!1;case 5:return e==="break"||e==="local"||e==="until"||e==="while";case 6:return e==="elseif"||e==="repeat"||e==="return";case 8:return e==="function"}return!1}function Ot(e){return U===e.type?"#-~".indexOf(e.value)>=0:_===e.type?e.value==="not":!1}function At(e){if(k===e.type)return!0;if(_!==e.type)return!1;switch(e.value){case"else":case"elseif":case"end":case"until":return!0;default:return!1}}var ie,oe,Se;function z(){var e=ie[oe++].slice();ie.push(e),i.onCreateScope&&i.onCreateScope()}function X(){ie.pop(),--oe,i.onDestroyScope&&i.onDestroyScope()}function Ce(e){i.onLocalDeclaration&&i.onLocalDeclaration(e),Ie(ie[oe],e)===-1&&ie[oe].push(e)}function he(e){Ce(e.name),ve(e,!0)}function ve(e,t){!t&&dt(Se,"name",e.name)===-1&&Se.push(e),e.isLocal=t}function Be(e){return Ie(ie[oe],e)!==-1}var G=[],q;function Y(){return new xe(d)}function xe(e){i.locations&&(this.loc={start:{line:e.line,column:e.range[0]-e.lineStart},end:{line:0,column:0}}),i.ranges&&(this.range=[e.range[0],0])}xe.prototype.complete=function(){i.locations&&(this.loc.end.line=J.lastLine||J.line,this.loc.end.column=J.range[1]-(J.lastLineStart||J.lineStart)),i.ranges&&(this.range[1]=J.range[1])},xe.prototype.bless=function(e){if(this.loc){var t=this.loc;e.loc={start:{line:t.start.line,column:t.start.column},end:{line:t.end.line,column:t.end.column}}}this.range&&(e.range=[this.range[0],this.range[1]])};function le(){q&&G.push(Y())}function K(e){q&&G.push(e)}function Z(){this.scopes=[],this.pendingGotos=[]}Z.prototype.isInLoop=function(){for(var e=this.scopes.length;e-- >0;)if(this.scopes[e].isLoop)return!0;return!1},Z.prototype.pushScope=function(e){var t={labels:{},locals:[],deferredGotos:[],isLoop:!!e};this.scopes.push(t)},Z.prototype.popScope=function(){for(var e=0;e<this.pendingGotos.length;++e){var t=this.pendingGotos[e];t.maxDepth>=this.scopes.length&&--t.maxDepth<=0&&N(t.token,x.labelNotVisible,t.target)}this.scopes.pop()},Z.prototype.addGoto=function(e,t){for(var n=[],s=0;s<this.scopes.length;++s){var p=this.scopes[s];if(n.push(p.locals.length),Object.prototype.hasOwnProperty.call(p.labels,e))return}this.pendingGotos.push({maxDepth:this.scopes.length,target:e,token:t,localCounts:n})},Z.prototype.addLabel=function(e,t){var n=this.currentScope();if(Object.prototype.hasOwnProperty.call(n.labels,e))N(t,x.labelAlreadyDefined,e,n.labels[e].line);else{for(var s=[],p=0;p<this.pendingGotos.length;++p){var S=this.pendingGotos[p];if(S.maxDepth>=this.scopes.length&&S.target===e){S.localCounts[this.scopes.length-1]<n.locals.length&&n.deferredGotos.push(S);continue}s.push(S)}this.pendingGotos=s}n.labels[e]={localCount:n.locals.length,line:t.line}},Z.prototype.addLocal=function(e,t){this.currentScope().locals.push({name:e,token:t})},Z.prototype.currentScope=function(){return this.scopes[this.scopes.length-1]},Z.prototype.raiseDeferredErrors=function(){for(var e=this.currentScope(),t=e.deferredGotos,n=0;n<t.length;++n){var s=t[n];N(s.token,x.gotoJumpInLocalScope,s.target,e.locals[s.localCounts[this.scopes.length-1]].name)}};function te(){this.level=0,this.loopLevels=[]}te.prototype.isInLoop=function(){return!!this.loopLevels.length},te.prototype.pushScope=function(e){++this.level,e&&this.loopLevels.push(this.level)},te.prototype.popScope=function(){var e=this.loopLevels,t=e.length;t&&e[t-1]===this.level&&e.pop(),--this.level},te.prototype.addGoto=te.prototype.addLabel=function(){throw new Error("This should never happen")},te.prototype.addLocal=te.prototype.raiseDeferredErrors=function(){};function Ke(){return u.labels?new Z:new te}function kt(){F(),le(),i.scope&&z();var e=Ke();e.allowVararg=!0,e.pushScope();var t=Q(e);return e.popScope(),i.scope&&X(),k!==d.type&&ge(d),q&&!t.length&&(J=d),L(b.chunk(t))}function Q(e){for(var t=[],n;!At(d);){if(d.value==="return"||!u.relaxedBreak&&d.value==="break"){t.push(He(e));break}n=He(e),O(";"),n&&t.push(n)}return t}function He(e){if(le(),U===d.type&&O("::"))return Ct(e);if(u.emptyStatement&&O(";")){q&&G.pop();return}if(e.raiseDeferredErrors(),_===d.type)switch(d.value){case"local":return F(),Vt(e);case"if":return F(),Ut(e);case"return":return F(),jt(e);case"function":F();var t=Rt();return $e(t);case"while":return F(),Dt(e);case"for":return F(),Pt(e);case"repeat":return F(),qt(e);case"break":return F(),e.isInLoop()||N(d,x.noLoopToBreak,d.value),Bt();case"do":return F(),$t(e);case"goto":return F(),Ge(e)}return u.contextualGoto&&d.type===W&&d.value==="goto"&&re.type===W&&re.value!=="goto"?(F(),Ge(e)):(q&&G.pop(),Mt(e))}function Ct(e){var t=d,n=V();return i.scope&&(Ce("::"+t.value+"::"),ve(n,!0)),T("::"),e.addLabel(t.value,t),L(b.labelStatement(n))}function Bt(){return L(b.breakStatement())}function Ge(e){var t=d.value,n=J,s=V();return e.addGoto(t,n),L(b.gotoStatement(s))}function $t(e){i.scope&&z(),e.pushScope();var t=Q(e);return e.popScope(),i.scope&&X(),T("end"),L(b.doStatement(t))}function Dt(e){var t=C(e);T("do"),i.scope&&z(),e.pushScope(!0);var n=Q(e);return e.popScope(),i.scope&&X(),T("end"),L(b.whileStatement(t,n))}function qt(e){i.scope&&z(),e.pushScope(!0);var t=Q(e);T("until"),e.raiseDeferredErrors();var n=C(e);return e.popScope(),i.scope&&X(),L(b.repeatStatement(n,t))}function jt(e){var t=[];if(d.value!=="end"){var n=Ne(e);for(n!=null&&t.push(n);O(",");)n=C(e),t.push(n);O(";")}return L(b.returnStatement(t))}function Ut(e){var t=[],n,s,p;for(q&&(p=G[G.length-1],G.push(p)),n=C(e),T("then"),i.scope&&z(),e.pushScope(),s=Q(e),e.popScope(),i.scope&&X(),t.push(L(b.ifClause(n,s))),q&&(p=Y());O("elseif");)K(p),n=C(e),T("then"),i.scope&&z(),e.pushScope(),s=Q(e),e.popScope(),i.scope&&X(),t.push(L(b.elseifClause(n,s))),q&&(p=Y());return O("else")&&(q&&(p=new xe(J),G.push(p)),i.scope&&z(),e.pushScope(),s=Q(e),e.popScope(),i.scope&&X(),t.push(L(b.elseClause(s)))),T("end"),L(b.ifStatement(t))}function Pt(e){var t=V(),n;if(i.scope&&(z(),he(t)),O("=")){var s=C(e);T(",");var p=C(e),S=O(",")?C(e):null;return T("do"),e.pushScope(!0),n=Q(e),e.popScope(),T("end"),i.scope&&X(),L(b.forNumericStatement(t,s,p,S,n))}else{for(var E=[t];O(",");)t=V(),i.scope&&he(t),E.push(t);T("in");var B=[];do{var Ee=C(e);B.push(Ee)}while(O(","));return T("do"),e.pushScope(!0),n=Q(e),e.popScope(),T("end"),i.scope&&X(),L(b.forGenericStatement(E,B,n))}}function Vt(e){var t,n=J;if(W===d.type){var s=[],p=[];do t=V(),s.push(t),e.addLocal(t.name,n);while(O(","));if(O("="))do{var S=C(e);p.push(S)}while(O(","));if(i.scope)for(var E=0,B=s.length;E<B;++E)he(s[E]);return L(b.localStatement(s,p))}if(O("function"))return t=V(),e.addLocal(t.name,n),i.scope&&(he(t),z()),$e(t,!0);ne("<name>",d)}function Mt(e){var t,n,s,p,S,E=[];q&&(n=Y());do{if(q&&(t=Y()),W===d.type)S=d.value,p=V(),i.scope&&ve(p,Be(S)),s=!0;else if(d.value==="(")F(),p=C(e),T(")"),s=!1;else return ge(d);e:for(;;){switch($===d.type?'"':d.value){case".":case"[":s=!0;break;case":":case"(":case"{":case'"':s=null;break;default:break e}p=Je(p,t,e)}if(E.push(p),d.value!==",")break;if(!s)return ge(d);F()}while(!0);if(E.length===1&&s===null)return K(t),L(b.callStatement(E[0]));if(!s)return ge(d);T("=");var B=[];do B.push(C(e));while(O(","));return K(n),L(b.assignmentStatement(E,B))}function V(){le();var e=d.value;return W!==d.type&&ne("<name>",d),F(),L(b.identifier(e))}function $e(e,t){var n=Ke();n.pushScope();var s=[];if(T("("),!O(")"))for(;;){if(W===d.type){var p=V();if(i.scope&&he(p),s.push(p),O(","))continue}else fe===d.type?(n.allowVararg=!0,s.push(je(n))):ne("<name> or '...'",d);T(")");break}var S=Q(n);return n.popScope(),T("end"),i.scope&&X(),t=t||!1,L(b.functionStatement(e,s,t,S))}function Rt(){var e,t,n;for(q&&(n=Y()),e=V(),i.scope&&(ve(e,Be(e.name)),z());O(".");)K(n),t=V(),e=L(b.memberExpression(e,".",t));return O(":")&&(K(n),t=V(),e=L(b.memberExpression(e,":",t)),i.scope&&Ce("self")),e}function We(e){for(var t=[],n,s;;){if(le(),U===d.type&&O("["))n=C(e),T("]"),T("="),s=C(e),t.push(L(b.tableKey(n,s)));else if(W===d.type)re.value==="="?(n=V(),F(),s=C(e),t.push(L(b.tableKeyString(n,s)))):(s=C(e),t.push(L(b.tableValue(s))));else{if((s=Ne(e))==null){G.pop();break}t.push(L(b.tableValue(s)))}if(",;".indexOf(d.value)>=0){F();continue}break}return T("}"),L(b.tableConstructorExpression(t))}function Ne(e){var t=De(0,e);return t}function C(e){var t=Ne(e);if(t==null)ne("<expression>",d);else return t}function Kt(e){var t=e.charCodeAt(0),n=e.length;if(n===1)switch(t){case 94:return 12;case 42:case 47:case 37:return 10;case 43:case 45:return 9;case 38:return 6;case 126:return 5;case 124:return 4;case 60:case 62:return 3}else if(n===2)switch(t){case 47:return 10;case 46:return 8;case 60:case 62:return e==="<<"||e===">>"?7:3;case 61:case 126:return 3;case 111:return 1}else if(t===97&&e==="and")return 2;return 0}function De(e,t){var n=d.value,s,p;if(q&&(p=Y()),Ot(d)){le(),F();var S=De(10,t);S==null&&ne("<expression>",d),s=L(b.unaryExpression(n,S))}if(s==null&&(s=je(t),s==null&&(s=Ht(t))),s==null)return null;for(var E;n=d.value,E=U===d.type||_===d.type?Kt(n):0,!(E===0||E<=e);){(n==="^"||n==="..")&&--E,F();var B=De(E,t);B==null&&ne("<expression>",d),q&&G.push(p),s=L(b.binaryExpression(n,s,B))}return s}function Je(e,t,n){var s,p;if(U===d.type)switch(d.value){case"[":return K(t),F(),s=C(n),T("]"),L(b.indexExpression(e,s));case".":return K(t),F(),p=V(),L(b.memberExpression(e,".",p));case":":return K(t),F(),p=V(),e=L(b.memberExpression(e,":",p)),K(t),qe(e,n);case"(":case"{":return K(t),qe(e,n)}else if($===d.type)return K(t),qe(e,n);return null}function Ht(e){var t,n,s;if(q&&(s=Y()),W===d.type)n=d.value,t=V(),i.scope&&ve(t,Be(n));else if(O("("))t=C(e),T(")");else return null;for(;;){var p=Je(t,s,e);if(p===null)break;t=p}return t}function qe(e,t){if(U===d.type)switch(d.value){case"(":u.emptyStatement||d.line!==J.line&&N(null,x.ambiguousSyntax,d.value),F();var n=[],s=Ne(t);for(s!=null&&n.push(s);O(",");)s=C(t),n.push(s);return T(")"),L(b.callExpression(e,n));case"{":le(),F();var p=We(t);return L(b.tableCallExpression(e,p))}else if($===d.type)return L(b.stringCallExpression(e,je(t)));ne("function arguments",d)}function je(e){var t=$|M|H|ue|fe,n=d.value,s=d.type,p;if(q&&(p=Y()),s===fe&&!e.allowVararg&&N(d,x.cannotUseVararg,d.value),s&t){K(p);var S=a.slice(d.range[0],d.range[1]);return F(),L(b.literal(s,n,S))}else{if(_===s&&n==="function")return K(p),F(),i.scope&&z(),$e(null);if(O("{"))return K(p),We(e)}}l.parse=Gt;var _e={"5.1":{},"5.2":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,relaxedBreak:!0},"5.3":{labels:!0,emptyStatement:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,bitwiseOperators:!0,integerDivision:!0,relaxedBreak:!0},LuaJIT:{labels:!0,contextualGoto:!0,hexEscapes:!0,skipWhitespaceEscape:!0,strictEscapes:!0,unicodeEscapes:!0,imaginaryNumbers:!0,integerSuffixes:!0}};function Gt(e,t){if(typeof t>"u"&&typeof e=="object"&&(t=e,e=void 0),t||(t={}),a=e||"",i=Te({},w,t),r=0,P=1,R=0,f=a.length,ie=[[]],oe=0,Se=[],G=[],!Object.prototype.hasOwnProperty.call(_e,i.luaVersion))throw new Error(pe("Lua version '%1' not supported",i.luaVersion));if(u=Te({},_e[i.luaVersion]),i.extendedIdentifiers!==void 0&&(u.extendedIdentifiers=!!i.extendedIdentifiers),!Object.prototype.hasOwnProperty.call(I,i.encodingMode))throw new Error(pe("Encoding mode '%1' not supported",i.encodingMode));return m=I[i.encodingMode],i.comments&&(Oe=[]),i.wait?l:Xe()}l.write=ze;function ze(e){return a+=String(e),f=a.length,l}l.end=Xe;function Xe(e){typeof e<"u"&&ze(e),a&&a.substr(0,2)==="#!"&&(a=a.replace(/^.*/,function(n){return n.replace(/./g," ")})),f=a.length,q=i.locations||i.ranges,re=Ae();var t=kt();if(i.comments&&(t.comments=Oe),i.scope&&(t.globals=Se),G.length>0)throw new Error("Location tracking failed. This is most likely a bug in luaparse");return t}})})(be,be.exports)),be.exports}Jt();async function rt(o,c="ronroblox"){try{const l=await fetch(`/api/fandom-image?filename=${encodeURIComponent(o)}&wiki=${encodeURIComponent(c)}`);if(!l.ok)throw new Error(`Failed to fetch image data: ${l.status}`);const a=await l.json();if(a.error)throw new Error(a.error);return a.url}catch(l){throw console.error(`Error fetching Fandom image URL for ${o}:`,l),l}}async function at(o,c="700x700"){try{const l=await fetch(`/api/roblox-thumbnail?assetid=${encodeURIComponent(o)}&size=${encodeURIComponent(c)}`);if(!l.ok)throw new Error(`Failed to fetch Thumbnail data: ${l.status}`);const a=await l.json();if(a.error)throw new Error(a.error);return a.imageUrl}catch(l){throw console.error(`Error fetching Roblox thumbnail URL for ${o}:`,l),l}}const Pe="/assets/Unknown%20Flag-Csi4Lygo.png";let j,Ze,se,Ue,ce=null,y={NationName:"",Flags:[]};async function _t(){return ce=(async()=>{try{const o=await fetch("/api/fandom-data");if(!o.ok)throw new Error(`HTTP ${o.status}`);const c=await o.json();j=c.Lawnames,Ze=c.Flagdata,se=c.Nationdata,Ue=c.Tagdata,console.log(j),console.log(Ze),console.log(se),console.log(Ue),await it()}catch(o){throw console.error("Error loading fandom data:",o),o}})(),ce}function zt(o,c){let l,a,i;for(a=document.getElementsByClassName("tabcontent"),l=0;l<a.length;l++)a[l].classList.remove("tabcontent-visible"),a[l].classList.add("tabcontent-hidden");for(i=document.getElementsByClassName("tablinks"),l=0;l<i.length;l++)i[l].className=i[l].className.replace(" active","");document.getElementById(c).classList.remove("tabcontent-hidden"),document.getElementById(c).classList.add("tabcontent-visible"),o.currentTarget.className+=" active"}async function it(){!se?.nationdata&&ce&&(console.log("â³ Waiting for data to load..."),await ce);const o=document.getElementsByClassName("nations-list"),c=36;function l(i,f){const u=document.createElement("li"),m=document.createElement("button"),w=document.createElement("span");w.classList.add("flag-image");const h=document.createElement("img");h.src=f,w.appendChild(h);const g=document.createElement("span");return g.textContent=i,m.appendChild(w),m.appendChild(g),m.addEventListener("click",()=>en(i)),u.appendChild(m),u}function a(i){return i.includes("scale-to-width-down")?i.replace(/scale-to-width-down\/\d+/,`scale-to-width-down/${c}`):i.replace(/\/revision\/latest/,`/revision/latest/scale-to-width-down/${c}`)}for(let i of o){const f=i.parentElement.id;let u=[];f==="Nations"?u=Object.keys(se.nationdata).filter(h=>se.nationdata[h].nation===!0).sort():f==="Releasables"?u=Object.keys(se.nationdata).filter(h=>se.nationdata[h].nation===!1).sort():f==="Formables"&&(u=Object.values(Ue.Tags).filter(h=>h.FormableName).filter(h=>!h.Removed).map(h=>h.FormableName).sort());const m=u.map(h=>rt(h+"_Flag.png")),w=await Promise.all(m);i.innerHTML="",u.forEach((h,g)=>{const v=a(w[g]),I=l(h,v);i.appendChild(I)})}}function Xt(){var o,c,l,a,i,f,u,m;for(o=document.getElementById("nations-search-filter"),c=o.value.toUpperCase(),l=document.getElementsByClassName("nations-list"),i=0;i<l.length;i++)for(f=l[i].getElementsByTagName("li"),a=0;a<f.length;a++)u=f[a].getElementsByTagName("span")[1],m=u.textContent||u.innerText,m.toUpperCase().indexOf(c)>-1?f[a].style.display="":f[a].style.display="none"}async function st(o){if(!j?.lawNames&&ce&&await ce,!o){console.error("No flag div provided to generateLawsList");return}const c=o.querySelector(".laws-selection");if(console.log(c),!c){console.error("Element with class 'laws-selection' not found in flag div");return}if(!j||!j.lawNames){console.error("Lawnames data not loaded yet");return}c.innerHTML="";function l(i){const f=document.createElement("button");return f.classList.add("btn"),f.textContent=i,f}const a=Object.entries(j.lawNames).sort((i,f)=>i[1].Name.localeCompare(f[1].Name));for(let[i,f]of a){const u=l(f.Name);c.appendChild(u)}}function ot(o={}){const c={FlagName:o.FlagName||"",FlagID:o.FlagID||"",Description:o.Description||"",Ideologies:o.Ideologies||[],Laws:o.Laws||{},NOTLaws:o.NOTLaws||{}};return y.Flags.push(c),c}function Qt(o){y.Flags.splice(o,1)}function Yt(o,c){const l=document.createElement("div");l.classList.add("flag"),l.dataset.flagIndex=c,l.innerHTML=`
        <button class="collapse-flag-overview-button">
            <div class="flag-overview">
                <div class="flag-overview-left">
                    <img class="dyn-flag" src="${Pe}">
                    <p id="flag-name">${o.FlagName||"Flag Name"}</p>
                </div>
                <div class="flag-overview-right">
                    <div><span class="flag-overview-title">Flag ID: </span>${o.FlagID}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Ideologies: </span>${o.Ideologies}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Laws: </span>${Object.keys(o.Laws)}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title ron-red">NOT Laws: </span>${Object.keys(o.NOTLaws)}<span class="flag-overview-content"></span></div>
                    <div><span class="flag-overview-title">Description: </span>${o.Description}<span class="flag-overview-content"></span></div>
                </div>
            </div>
        </button>
        <div class="flag-contents">
            <button class="delete-flag-button">Delete Flag</button>
            
            <div class="flag-label"><span class="flag-title">Name: </span><input class="flag-input flag-name-input" value="${o.FlagName}"></div>
            <div class="flag-label"><span class="flag-title">Image ID: </span><input class="flag-input flag-image-input" value="${o.FlagID}"></div>
            <div class="flag-label"><span class="flag-title">Description/Sources: </span><input class="flag-input flag-description-input" value="${o.Description}"></div>
            
            <div class="ideologies">
                <ul>
                    <li>
                        <button type="button" class="btn">Non-Aligned</button>
                        <ul>
                            <li>
                                <button style="color: #F3B6B6;" type="button" class="btn">Socialism</button>
                                <ul>
                                    <li><button style="color: #F37B7B;" type="button" class="btn">Communism</button></li>
                                </ul>
                            </li>
                            <li>
                                <button style="color: #B5B6F3;" type="button" class="btn">Liberalism</button>
                                <ul>
                                    <li><button style="color: #7B7BF3;" type="button" class="btn">Democracy</button></li>
                                </ul>
                            </li>
                            <li>
                                <button style="color: #B8B8B9;" type="button" class="btn">Nationalism</button>
                                <ul>
                                    <li><button style="color: #7B7B7B;" type="button" class="btn">Fascism</button></li>
                                </ul>
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
            
            <div class="laws">
                <div class="laws-selection">
                    <img src="https://media.tenor.com/3xTqDrUgvvIAAAAi/error-404.gif" alt="Loading..." class="loading-gif">
                </div>
                <div class="laws-name"></div>
                <div class="laws-level"></div>
            </div>
        </div>
    `;const a=l.querySelector(".collapse-flag-overview-button"),i=l.querySelector(".flag-contents");return a.addEventListener("click",()=>{i.classList.toggle("is-hidden")}),l.querySelector(".delete-flag-button").addEventListener("click",()=>{Qt(c),we()}),l.querySelector(".flag-name-input").addEventListener("input",v=>{y.Flags[c].FlagName=v.target.value,ye(l,c)}),l.querySelector(".flag-image-input").addEventListener("input",v=>{y.Flags[c].FlagID=v.target.value,ye(l,c)}),l.querySelector(".flag-description-input").addEventListener("input",v=>{y.Flags[c].Description=v.target.value,ye(l,c)}),l.querySelector(".ideologies").addEventListener("click",v=>{if(v.target&&v.target.tagName==="BUTTON"){const I=v.target.textContent,k=y.Flags[c].Ideologies;k.includes(I)?(y.Flags[c].Ideologies=k.filter($=>$!==I),v.target.classList.remove("btn-allowed")):(y.Flags[c].Ideologies.push(I),v.target.classList.add("btn-allowed")),ut(l,y.Flags[c],c)}}),l.querySelector(".laws-selection").addEventListener("click",v=>{if(v.target&&v.target.tagName==="BUTTON"){const I=v.target.textContent;Zt(l,I)}}),st(l),l}function Zt(o,c){const l=o.querySelector(".laws-name"),a=o.querySelector(".laws-level"),i=ct(c);l.innerHTML=c;const f=a.cloneNode(!1);a.parentNode.replaceChild(f,a);const u=parseInt(o.dataset.flagIndex,10);for(let m in j.lawNames[i].Types){const w=j.lawNames[i].Types[m],h=document.createElement("button");h.classList.add("btn"),h.textContent=w,f.appendChild(h)}et(f,u,i),f.addEventListener("click",m=>{if(m.target&&m.target.tagName==="BUTTON"){const w=m.target.textContent,h=lt(c,w);y.Flags[u].Laws[i]||(y.Flags[u].Laws[i]=[]),y.Flags[u].NOTLaws[i]||(y.Flags[u].NOTLaws[i]=[]);const g=y.Flags[u].Laws[i],v=y.Flags[u].NOTLaws[i];if(g.includes(h)){const I=g.indexOf(h);g.splice(I,1),v.push(h)}else if(v.includes(h)){const I=v.indexOf(h);v.splice(I,1)}else g.push(h);g.length===0&&v.length===0?(delete y.Flags[u].Laws[i],delete y.Flags[u].NOTLaws[i]):g.length===0?delete y.Flags[u].Laws[i]:v.length===0&&delete y.Flags[u].NOTLaws[i],et(f,u,i),ft(o,y.Flags[u]),ye(o,u)}})}function et(o,c,l){const a=o.querySelectorAll("button"),i=y.Flags[c].Laws[l],f=y.Flags[c].NOTLaws[l],u=Array.isArray(i)&&i.length>0,m=Array.isArray(f)&&f.length>0;a.forEach(w=>{const h=w.textContent,g=lt(j.lawNames[l].Name,h);w.classList.remove("btn-allowed","btn-not-allowed"),u?i.includes(g)?w.classList.add("btn-allowed"):w.classList.add("btn-not-allowed"):m&&f.includes(g)&&w.classList.add("btn-not-allowed")})}function en(o){y.NationName=o,we()}function tt(o,c){return j.lawNames[o]?j.lawNames[o].Types[c]:"Law Not Found"}function lt(o,c){for(let l in j.lawNames)if(j.lawNames[l].Name===o){const a=j.lawNames[l].Types;for(let i in a)if(a[i]===c)return i}return console.log("Law Not Found for",o,c),"Law Not Found"}function nt(o){if(j.lawNames[o])return j.lawNames[o].Name}function ct(o){for(let c in j.lawNames)if(j.lawNames[c].Name===o)return c;return null}function ut(o,c,l){o.dataset.flagIndex=l;const a=o.querySelector(".flag-name-input");a&&a.value!==c.FlagName&&(a.value=c.FlagName);const i=o.querySelector(".flag-image-input");i&&i.value!==c.FlagID&&(i.value=c.FlagID);const f=o.querySelector(".flag-description-input");f&&f.value!==c.Description&&(f.value=c.Description);const u=o.querySelectorAll(".ideologies button"),m=c.Ideologies.length>0;u.forEach(w=>{const h=w.textContent,g=c.Ideologies.includes(h);w.classList.remove("btn-allowed","btn-not-allowed"),m&&(g?w.classList.add("btn-allowed"):w.classList.add("btn-not-allowed"))}),ft(o,c),ye(o,l)}function ft(o,c){o.querySelectorAll(".laws-selection button").forEach(a=>{const i=a.textContent,f=ct(i);if(!f)return;const u=c.Laws[f],m=c.NOTLaws[f],w=Array.isArray(u)&&u.length>0,h=Array.isArray(m)&&m.length>0;a.classList.remove("btn-allowed","btn-not-allowed","btn-half-allowed"),w&&h?a.classList.add("btn-half-allowed"):w?a.classList.add("btn-allowed"):h&&a.classList.add("btn-not-allowed")})}function ye(o,c){const l=y.Flags[c],a=o.querySelector(".flag-overview-left #flag-name");a&&(a.textContent=l.FlagName||"Flag Name");const i=o.querySelector(".flag-overview-left .dyn-flag");i&&at(l.FlagID,"700x700").then(u=>{l.FlagID!=""&&(i.src=u)}).catch(u=>{i.src=Pe,console.error(`Error fetching roblox thumbnail flag for image id: ${l.FlagID}:`,u)});const f=o.querySelectorAll(".flag-overview-right > div");if(f.length>=5){let u='<span class="flag-overview-title">Laws: </span>';const m=[];for(let g in l.Laws){const v=nt(g),I=l.Laws[g];if(Array.isArray(I)&&I.length>0){const k=I.map($=>tt(g,$));m.push(`${v}: ${k.join(", ")}`)}}u+=m.length>0?"<br>"+m.join("<br>"):"None";let w='<span class="flag-overview-title ron-red">NOT Laws: </span>';const h=[];for(let g in l.NOTLaws){const v=nt(g),I=l.NOTLaws[g];if(Array.isArray(I)&&I.length>0){const k=I.map($=>tt(g,$));h.push(`${v}: ${k.join(", ")}`)}}w+=h.length>0?"<br>"+h.join("<br>"):"None",f[0].innerHTML=`<span class="flag-overview-title">Flag ID: </span>${l.FlagID}<span class="flag-overview-content"></span>`,f[1].innerHTML=`<span class="flag-overview-title">Ideologies: </span>${l.Ideologies.join(", ")}<span class="flag-overview-content"></span>`,f[2].innerHTML=u+'<span class="flag-overview-content"></span>',f[3].innerHTML=w+'<span class="flag-overview-content ron-red"></span>',f[4].innerHTML=`<span class="flag-overview-title">Description: </span>${l.Description}<span class="flag-overview-content"></span>`,pt()}}function we(){console.log("Current Flag Specifications:",y);const o=document.querySelector("#nation-name"),c=document.querySelector("#nation-flag");o&&(o.value=y.NationName,rt(y.NationName+"_Flag.png").then(f=>{y.NationName!=""&&c&&(c.src=f)}).catch(f=>{c.src=Pe,console.error(`Error fetching nation flag for ${y.NationName}:`,f)}));const l=document.querySelector(".main-content"),a=document.querySelector(".new-flag-button"),i=document.querySelectorAll(".flag");i.forEach((f,u)=>{u>=y.Flags.length&&f.remove()}),y.Flags.forEach((f,u)=>{const m=i[u];if(m)ut(m,f,u);else{const w=Yt(f,u);l.insertBefore(w,a)}}),pt()}async function pt(){const o="&nbsp;&nbsp;&nbsp;&nbsp;",c=document.querySelector("#output-text");function l(g){const v=g.FlagID?`rbxassetid://${g.FlagID}`:"",I=g.FlagName||"",k=g.Ideologies&&g.Ideologies.length>0,$=g.Laws&&Object.keys(g.Laws).length>0,_=g.NOTLaws&&Object.keys(g.NOTLaws).length>0;if(!(k||$||_))return`${o}["${I}"] = {ID = "${v}",},`;let M=[];if(M.push(`${o}["${I}"] = {ID = "${v}",`),M.push(`${o}${o}Requirements = {`),k){const U=g.Ideologies.map(H=>`"${H}"`).join(", ");M.push(`${o}${o}${o}${o}["Ideology"] = '[${U}]',`)}if($){const U={};for(let H in g.Laws)U[H]=g.Laws[H];M.push(`${o}${o}${o}${o}["Political_Law"] = '${JSON.stringify(U)}',`)}if(_){const U={};for(let H in g.NOTLaws)U[H]=g.NOTLaws[H];M.push(`${o}${o}${o}${o}["NOT_Political_Law"] = '${JSON.stringify(U)}',`)}return M.push(`${o}${o}},`),M.push(`${o}},`),M.join("<br>")}const a=y.Flags.filter(g=>g.Description).map(g=>`**${g.FlagName}:** ${g.Description}`).join("<br>"),i=y.Flags.filter(g=>g.FlagName&&g.FlagID).map(g=>l(g)).join("<br>"),f=y.Flags.filter(g=>g.FlagName&&g.FlagID),u=await Promise.all(f.map(g=>at(g.FlagID,"700x700").catch(()=>null))),w=f.map((g,v)=>u[v]?`[${g.FlagName}](${u[v]})`:null).filter(Boolean).reduce((g,v,I)=>{const k=Math.floor(I/3);return g[k]||(g[k]=[]),g[k].push(v),g},[]).map(g=>g.join(", ")).join("<br>"),h=`\`\`\`lua
    <br>["${y.NationName}"] = {
    <br>${i}
    <br>},
    <br>\`\`\`
    <br>--[[
    <br># __Description/Sources__
    <br>${a}
    <br># __Images__
    <br>${w}
    <br>> -# *Made using [Dyn Flagger](https://dyn-flagger.pages.dev/ )*
    <br>]]`;c.innerHTML=h}function tn(){const o=document.getElementById("output-text"),c=document.getElementById("copy-output-btn");navigator.clipboard.writeText(o.innerText),c.innerText="Copied!",c.classList.add("output-btn-copied"),setTimeout(()=>{c.innerText="Copy to clipboard",c.classList.remove("output-btn-copied")},1e3)}document.addEventListener("DOMContentLoaded",()=>{const o=document.querySelector(".new-flag-button button");o&&o.addEventListener("click",()=>{ot(),we()});const c=document.querySelector("#nation-name");c&&c.addEventListener("input",l=>{y.NationName=l.target.value,we()})});_t();ot();we();window.switchTab=zt;window.generateLawsList=st;window.generateNationsList=it;window.nationsSearchFilter=Xt;window.copyOutput=tn;
